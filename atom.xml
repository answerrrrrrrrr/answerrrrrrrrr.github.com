<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Answerrrrrrrrr</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://answerrrrrrrrr.io/"/>
  <updated>2016-10-09T02:55:49.000Z</updated>
  <id>http://answerrrrrrrrr.io/</id>
  
  <author>
    <name>Air9</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>idapython-elf-gadget</title>
    <link href="http://answerrrrrrrrr.io/2016/10/08/idapython-elf-gadget/"/>
    <id>http://answerrrrrrrrr.io/2016/10/08/idapython-elf-gadget/</id>
    <published>2016-10-08T03:38:29.000Z</published>
    <updated>2016-10-09T02:55:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h1><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ batch.py</span><br><span class="line">â”œâ”€â”€ detail</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ heap_test.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ heap<span class="emphasis">_test_</span>static.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ libc2.21.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ls.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mv.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ stack_test.txt</span><br><span class="line">â”‚Â Â  â””â”€â”€ stack<span class="emphasis">_test_</span>static.txt</span><br><span class="line">â”œâ”€â”€ elf</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ heap_test</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ heap<span class="emphasis">_test_</span>static</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ libc2.21</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ls</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mv</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ stack_test</span><br><span class="line">â”‚Â Â  â””â”€â”€ stack<span class="emphasis">_test_</span>static</span><br><span class="line">â”œâ”€â”€ fragment</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ heap_test.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ heap<span class="emphasis">_test_</span>static.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ libc2.21.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ls.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mv.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ stack_test.txt</span><br><span class="line">â”‚Â Â  â””â”€â”€ stack<span class="emphasis">_test_</span>static.txt</span><br><span class="line">â”œâ”€â”€ ganalyzer.py</span><br><span class="line">â”œâ”€â”€ gcollector.py</span><br><span class="line">â”œâ”€â”€ gvalidator.py</span><br><span class="line">â”œâ”€â”€ lib</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="strong">__init__</span>.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="strong">__init__</span>.pyc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ classifier.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ classifier.pyc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ extra_archinfo.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ extra_archinfo.pyc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ gadget.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ gadget.pyc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ utils.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ utils.pyc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ validator.py</span><br><span class="line">â”‚Â Â  â””â”€â”€ validator.pyc</span><br><span class="line">â”œâ”€â”€ pin</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ heap_test.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ heap<span class="emphasis">_test_</span>static.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ libc2.21.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ls.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mv.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ stack_test.txt</span><br><span class="line">â”‚Â Â  â””â”€â”€ stack<span class="emphasis">_test_</span>static.txt</span><br><span class="line">â””â”€â”€ result.txt</span><br><span class="line"></span><br><span class="line">5 directories, 46 files</span><br></pre></td></tr></table></figure>
<h1 id="æ‰§è¡Œæµç¨‹"><a href="#æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‰§è¡Œæµç¨‹"></a>æ‰§è¡Œæµç¨‹</h1><p><img src="/images/idapython-elf-gadget.png" alt="img"></p>
<h1 id="å…·ä½“æ­¥éª¤"><a href="#å…·ä½“æ­¥éª¤" class="headerlink" title="å…·ä½“æ­¥éª¤"></a>å…·ä½“æ­¥éª¤</h1><ol>
<li>å°†è¦åˆ†æçš„ elf æ–‡ä»¶æ”¾å…¥ elf ç›®å½•</li>
<li>åœ¨ä¸»ç›®å½•è¿è¡Œ<code>python batch.py</code></li>
<li>è„šæœ¬ä¼šæ‰¹é‡ä½¿ç”¨ ida é™æ€åˆ†æ elf ç›®å½•å†…çš„æ‰€æœ‰ elf æ–‡ä»¶å¹¶åœ¨å®Œæˆåè‡ªåŠ¨å…³é—­ ida</li>
<li>ç”±äºç‰ˆæœ¬åŠŸèƒ½é™åˆ¶ï¼Œæ— æ³•å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ¯ä¸ª elf éœ€è¦åœ¨å¼¹çª—æ—¶æ‰‹åŠ¨å›è½¦ç¡®è®¤ 2 æ¬¡</li>
<li>ä¸­é—´ç»“æœåˆ†åˆ«ä¿å­˜äº fragment, detail å’Œ pin ç›®å½•ï¼Œæœ€ç»ˆç»“æœä¿å­˜äºä¸»ç›®å½•ä¸‹çš„ result.txt</li>
</ol>
<h1 id="ä¸»è¦æ¨¡å—"><a href="#ä¸»è¦æ¨¡å—" class="headerlink" title="ä¸»è¦æ¨¡å—"></a>ä¸»è¦æ¨¡å—</h1><h2 id="gcollector-py"><a href="#gcollector-py" class="headerlink" title="gcollector.py"></a>gcollector.py</h2><h3 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>æ‰¾åˆ°æ‰€æœ‰é—´æ¥è·³è½¬ï¼ˆIBR)ï¼Œå†æŒ‰ IBR æ‰€åœ¨åœ°å€å›æº¯ï¼Œç›´åˆ°ä¸Šä¸€æ¡è·³è½¬æŒ‡ä»¤ä¸ºæ­¢ï¼Œè¾“å‡ºå…¶é—´æ‰€æœ‰å¯èƒ½æ„æˆ gadget çš„æŒ‡ä»¤ç‰‡æ®µï¼ŒæŒ‰ä¸åŒæ–‡ä»¶åä¿å­˜åˆ° fragment ç›®å½• </p>
<h3 id="ä¾‹å¦‚"><a href="#ä¾‹å¦‚" class="headerlink" title="ä¾‹å¦‚"></a>ä¾‹å¦‚</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&gt; length: 1</span><br><span class="line">|-- .fini:80485B7	retn</span><br><span class="line">c3</span><br><span class="line">----------------------------------------</span><br><span class="line">&gt; length: 2</span><br><span class="line">|-- .fini:80485B6	pop     ebx</span><br><span class="line">|-- .fini:80485B7	retn</span><br><span class="line">5bc3</span><br><span class="line">----------------------------------------</span><br><span class="line">&gt; length: 3</span><br><span class="line">|-- .fini:80485B3	add     esp, 8</span><br><span class="line">|-- .fini:80485B6	pop     ebx</span><br><span class="line">|-- .fini:80485B7	retn</span><br><span class="line">83c4085bc3</span><br><span class="line">----------------------------------------</span><br><span class="line">&gt; length: 4</span><br><span class="line">|-- .fini:80485AD	add     ebx, 1217h</span><br><span class="line">|-- .fini:80485B3	add     esp, 8</span><br><span class="line">|-- .fini:80485B6	pop     ebx</span><br><span class="line">|-- .fini:80485B7	retn</span><br><span class="line">81c31712000083c4085bc3</span><br></pre></td></tr></table></figure>
<p>å›æº¯åˆ°ç¬¬ 5 æ¡æŒ‡ä»¤æ—¶ä¸ºå¦ä¸€æ¡è·³è½¬æŒ‡ä»¤ï¼Œæ‰€ä»¥ä»¥ <code>80485B7    retn</code>ä¸ºç»“å°¾æ‰€æœ‰å¯èƒ½ä¸º gadget çš„æŒ‡ä»¤ç‰‡æ®µä¸€å…±åªæœ‰ 4 ç§</p>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><ol>
<li>åˆ©ç”¨ ida-python æä¾›çš„ api <code>Segments()</code>è·å¾—æ‰€æœ‰æ®µèµ·å§‹åœ°å€ï¼Œ<code>SegEnd()</code>è·å–æ®µç»“æŸåœ°å€</li>
<li>æ ¹æ®å¯¹åº”æ®µçš„èµ·æ­¢åœ°å€ï¼Œåˆ©ç”¨<code>Heads(start, end)</code>å¾—åˆ°æ®µå†…æ‰€æœ‰æŒ‡ä»¤çš„èµ·å§‹åœ°å€</li>
<li>åˆ©ç”¨<code>disasm(head)</code>å‡½æ•°è·å¾—æŒ‡ä»¤çš„æœºå™¨ç å’Œæ±‡ç¼–ä»£ç </li>
<li>é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å’Œæœºå™¨ç åˆ¤æ–­æŒ‡ä»¤æ˜¯å¦ä¸º<code>é—´æ¥è·³è½¬æŒ‡ä»¤</code>å¹¶æŒ‰å¦‚ä¸Šç›®æ ‡æ ¼å¼ä¿å­˜ï¼ŒåŒæ—¶åŠ ä¸Š<code>call-preceded</code>å’Œ<code>syscall</code>ç­‰æ ‡è®°</li>
<li>å¯¹æ€»æŒ‡ä»¤æ•°ç­‰æ•°æ®è¿›è¡Œç»Ÿè®¡ï¼ŒåŒæ—¶åˆ©ç”¨<code>Functions()</code>æ”¶é›†æ‰€æœ‰å‡½æ•°å…¥å£</li>
</ol>
<h2 id="gvalidator-py"><a href="#gvalidator-py" class="headerlink" title="gvalidator.py"></a>gvalidator.py</h2><h3 id="ç›®æ ‡-1"><a href="#ç›®æ ‡-1" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>ä»¥æ¯ä¸ªé—´æ¥è·³è½¬ä¸ºå•ä½ï¼Œå¯¹æ‰€æœ‰ä»¥è¯¥é—´æ¥è·³è½¬ä¸ºç»“å°¾çš„æŒ‡ä»¤ç‰‡æ®µè¿›è¡Œåˆ¤æ–­ï¼š</p>
<ol>
<li>æ˜¯å¦å­˜åœ¨ functional gadgetï¼Œ æœ€å¤§é•¿åº¦å¤šå°‘</li>
<li>æ˜¯å¦å­˜åœ¨ nop gadgetï¼Œ æœ€å¤§é•¿åº¦å¤šå°‘</li>
<li>æ˜¯å¦ä¸º call-preceded gadget</li>
</ol>
<h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ol>
<li>éå† fragment ç›®å½•ä¸­æ‰€æœ‰ txt æ–‡ä»¶å¹¶ä¾æ¬¡è¿›è¡Œé€è¡Œè¯»å–ï¼Œæ ¹æ®<code>+&gt;|-*</code>ç­‰é¢„è®¾æ ‡è®°åˆ¤æ–­è¯¥è¡Œå†…å®¹ç±»å‹ï¼Œç„¶åæ”¶é›†å¯¹åº”é•¿åº¦çš„æŒ‡ä»¤ç‰‡æ®µã€ç‰‡æ®µå†…éƒ¨é­åˆ°ä¿®æ”¹çš„å¯„å­˜å™¨</li>
<li>è¯»å–åˆ°æ•´ä¸ªæŒ‡ä»¤ç‰‡æ®µçš„æœºå™¨ç æ—¶ï¼Œåˆ©ç”¨ Q çš„ api <code>classifier.GadgetClassifier()</code>åˆ¤æ–­ç‰‡æ®µæ˜¯å¦ä¸º functional gadgetï¼Œå¹¶ç»Ÿè®¡ç›¸å…³æ•°æ®</li>
<li>è‹¥é functional gadgetï¼Œæ ¹æ®å¯å®¹å¿çš„æœ€å¤§å¯„å­˜å™¨ä¿®æ”¹æ•°é‡åˆ¤æ–­å¯å¦å½’ä¸º nop gadgetï¼Œå¹¶ç»Ÿè®¡ç›¸å…³æ•°æ®</li>
<li>æŒ‰æ–‡ä»¶åä¿å­˜æ‰€æœ‰ç»Ÿè®¡æ•°æ®åˆ° detail ç›®å½•</li>
<li>å¦å¤–æŒ‰ç…§ pin åŠ¨æ€åˆ†ææ‰€éœ€çš„è¾“å…¥æ•°æ®æ ¼å¼å°†å¯¹åº”éƒ¨åˆ†æ•°æ®ä¿å­˜åˆ° pin ç›®å½•</li>
</ol>
<h2 id="ganalyzer-py"><a href="#ganalyzer-py" class="headerlink" title="ganalyzer.py"></a>ganalyzer.py</h2><h3 id="ç›®æ ‡-2"><a href="#ç›®æ ‡-2" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>å°† detail ç›®å½•ä¸­æ‰€æœ‰ç»Ÿè®¡æ•°æ®æ±‡æ€»åˆ° result.txt ä¸­</p>
<h3 id="è¾“å‡ºæ ·ä¾‹"><a href="#è¾“å‡ºæ ·ä¾‹" class="headerlink" title="è¾“å‡ºæ ·ä¾‹"></a>è¾“å‡ºæ ·ä¾‹</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">heap_test, heap_test_static, libc2, ls, mv, stack_test, stack_test_static</span><br><span class="line">+ Files: <span class="number">7</span></span><br><span class="line"></span><br><span class="line">+ [AVG]</span><br><span class="line">|-- Functions: <span class="number">794.00</span></span><br><span class="line">|-- Instructions: <span class="number">86870.29</span></span><br><span class="line">|-- Branch instructions: <span class="number">17118.00</span></span><br><span class="line">|-- Indirect branch instructions: <span class="number">1609.29</span></span><br><span class="line">    |-- ret: <span class="number">1211.43</span> (<span class="number">9</span> ~ <span class="number">5587</span>)</span><br><span class="line">    |-- jmp: <span class="number">88.00</span> (<span class="number">1</span> ~ <span class="number">408</span>)</span><br><span class="line">    |-- call: <span class="number">284.43</span> (<span class="number">4</span> ~ <span class="number">1300</span>)</span><br><span class="line">    |-- system call: <span class="number">90.57</span> (<span class="number">0</span> ~ <span class="number">462</span>)</span><br><span class="line">    |-- call preceded: <span class="number">284.43</span> (<span class="number">4</span> ~ <span class="number">1300</span>)</span><br><span class="line">|-- Functional gadgets: <span class="number">6145.29</span></span><br><span class="line">    |-- length: <span class="number">4.15</span> (<span class="number">0</span> ~ <span class="number">48</span>)</span><br><span class="line">|-- Nop gadgets: <span class="number">3634.14</span></span><br><span class="line">    |-- length: <span class="number">2.07</span> (<span class="number">0</span> ~ <span class="number">71</span>)</span><br><span class="line">|-- Normal code fragments: <span class="number">924.57</span></span><br><span class="line">    |-- length: <span class="number">9.01</span> (<span class="number">0</span> ~ <span class="number">80</span>)</span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ç›®å½•ç»“æ„&quot;&gt;&lt;a href=&quot;#ç›®å½•ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;ç›®å½•ç»“æ„&quot;&gt;&lt;/a&gt;ç›®å½•ç»“æ„&lt;/h1&gt;&lt;figure class=&quot;highlight md&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;sp
    
    </summary>
    
      <category term="idapython" scheme="http://answerrrrrrrrr.io/categories/idapython/"/>
    
    
      <category term="ida" scheme="http://answerrrrrrrrr.io/tags/ida/"/>
    
      <category term="idapython" scheme="http://answerrrrrrrrr.io/tags/idapython/"/>
    
      <category term="python" scheme="http://answerrrrrrrrr.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>ionic ä½¿ç”¨ popover æ—¶çš„ä¸€ç‚¹å°é—®é¢˜</title>
    <link href="http://answerrrrrrrrr.io/2016/09/27/ionic-popover/"/>
    <id>http://answerrrrrrrrr.io/2016/09/27/ionic-popover/</id>
    <published>2016-09-27T08:52:04.000Z</published>
    <updated>2016-09-29T08:58:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ ionic é™„å¸¦çš„ ngResource æ—¶éœ€è¦åœ¨ index.html ä¸­åŠ ä¸Š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/ionic/js/angular/angular-resource.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦åˆ™ä¼šæŠ¥é”™</p>
<p>å¦å¤–ï¼Œ<a href="http://ionicframework.com/docs/api/service/$ionicPopover/" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ä¸­å…³äºä½¿ç”¨<code>popover</code>ç‹¬ç«‹ html æ¨¡æ¿çš„æ ¼å¼æœ‰ç‚¹å°é—®é¢˜ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">"my-popover.html"</span> <span class="attr">type</span>=<span class="string">"text/ng-template"</span>&gt;</span><span class="handlebars"><span class="xml"></span><br><span class="line">  <span class="tag">&lt;<span class="name">ion-popover-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ion-header-bar</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>My Popover Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ion-header-bar</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ion-content</span>&gt;</span></span><br><span class="line">      Hello!</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ion-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ion-popover-view</span>&gt;</span></span><br><span class="line"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>éœ€æ”¹ä¸º</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ion-popover-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ion-header-bar</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>My Popover Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ion-header-bar</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ion-content</span>&gt;</span></span><br><span class="line">    Hello!qwew</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ion-content</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ion-popover-view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦åˆ™ä¼šæ— æ³•æ‰¾åˆ°å¯¹åº” template è€Œäº§ç”Ÿ<code>Error: popoverEle[0] is undefined</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½¿ç”¨ ionic é™„å¸¦çš„ ngResource æ—¶éœ€è¦åœ¨ index.html ä¸­åŠ ä¸Š&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span c
    
    </summary>
    
      <category term="ionic" scheme="http://answerrrrrrrrr.io/categories/ionic/"/>
    
    
      <category term="JavaScript" scheme="http://answerrrrrrrrr.io/tags/JavaScript/"/>
    
      <category term="AngularJS" scheme="http://answerrrrrrrrr.io/tags/AngularJS/"/>
    
      <category term="ngResource" scheme="http://answerrrrrrrrr.io/tags/ngResource/"/>
    
      <category term="ionic" scheme="http://answerrrrrrrrr.io/tags/ionic/"/>
    
  </entry>
  
  <entry>
    <title>Code Smell</title>
    <link href="http://answerrrrrrrrr.io/2016/09/25/code-smell/"/>
    <id>http://answerrrrrrrrr.io/2016/09/25/code-smell/</id>
    <published>2016-09-25T08:44:03.000Z</published>
    <updated>2016-09-25T08:51:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>è½¬è‡ªï¼š<a href="http://www.nowamagic.net/librarys/veda/detail/2053" target="_blank" rel="external">http://www.nowamagic.net/librarys/veda/detail/2053</a></p>
<p>Code Smellä¸­æ–‡è¯‘åä¸€èˆ¬ä¸ºâ€œä»£ç å¼‚å‘³â€ï¼Œæˆ–â€œä»£ç å‘³é“â€ï¼Œå®ƒæ˜¯æç¤ºä»£ç ä¸­æŸä¸ªåœ°æ–¹å­˜åœ¨é”™è¯¯çš„ä¸€ä¸ªæš—ç¤ºï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡è¿™ç§smellï¼ˆå¼‚å‘³ï¼‰åœ¨ä»£ç ä¸­è¿½æ•åˆ°é—®é¢˜ã€‚</p>
<p>åœ¨è®¡ç®—æœºç¼–ç¨‹ç¤¾åŒºä¸­ï¼Œcode smellä»£è¡¨äº†ä»»ä½•æ ‡å¿—ç€äº‹ç‰©å˜åçš„å¾å…†ã€‚å®ƒå¸¸å¸¸æ ‡å¿—ä»£ç åº”è¯¥è¢«refactoredæˆ–è€…å…¨éƒ¨çš„è®¾è®¡éƒ½åº”è¯¥è¢«reviewedã€‚è¿™ä¸ªçŸ­è¯­å‡ºç°åœ¨ WardsWikiä¸Šï¼Œå®ƒæ˜¯è¢«Kent Beckæœæ’°å‡ºæ¥çš„ã€‚åœ¨refactoringå…´èµ·ä¹‹åï¼Œè¿™ä¸ªçŸ­è¯­çš„ä½¿ç”¨ç‡éª¤å¢ã€‚</p>
<p>åˆ¤æ–­æ˜¯å¦å­˜åœ¨code smellç»å¸¸æ˜¯ä¸»è§‚åˆ¤æ–­ï¼Œå¹¶ä¸”éšç€è¯­è¨€ã€å¼€å‘è€…ã€å¼€å‘ç†è®ºçš„ä¸åŒè€Œå­˜åœ¨å·®å¼‚ã€‚</p>
<p>ç»éªŒä¸°å¯Œå’ŒçŸ¥è¯†æ¸Šåšçš„å¼€å‘äººå‘˜é€šè¿‡å¯¹ä¼˜ç§€è®¾è®¡æœ‰ä¸€ç§â€œæ„Ÿè§‰â€ï¼Œä»–ä»¬å·²ç»è¾¾åˆ°ä¸€ç§ç§°ä¹‹ä¸ºâ€œæ— æ„è¯†èƒ½åŠ› ï¼ˆUnconsciousCompetenceï¼‰â€çš„çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬æ— éœ€æ€è€ƒï¼Œåªè¦é€šè¿‡æŸ¥çœ‹ä»£ç æˆ–ä¸€æ®µè®¾è®¡å°±å¯ä»¥ç«‹é©¬å¯¹è¿™ä¸ªé¡¹ç›®çš„ä»£ç è´¨é‡æœ‰ä¸€ç§ â€œæ„Ÿè§‰â€ï¼Œèƒ½å¤Ÿå¯¹ä»£ç è®¾è®¡çš„ä¼˜åŠ£æœ‰ä¸€ä¸ªå¤§è‡´çš„åˆ¤æ–­ã€‚</p>
<p>ä½†å¤§å®¶éœ€è¦æ³¨æ„ï¼Œcode smellåªæ˜¯ä¸€ç§â€œæš—ç¤ºâ€ï¼Œè€Œéä¸€ç§â€œç¡®å®šâ€ã€‚å°†æŸäº›äº‹ç‰©ç§°ä¹‹ä¸ºâ€œcode smellâ€å¹¶æœªæ˜¯ä¸€ç§æ”»å‡»ï¼Œå®ƒåªæ˜¯ä¸€ç§æç¤ºï¼šå¼€å‘äººå‘˜éœ€è¦å¯¹é¡¹ç›®è®¾è®¡è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æŸ¥çœ‹ã€‚å› æ­¤ï¼Œcode smellæ›´å¤šæ˜¯â€œç›´è§‰çš„ï¼Œæœ¬èƒ½çš„â€ã€‚</p>
<p>code smellä¸€èˆ¬åŒ…æ‹¬ï¼š</p>
<ol>
<li><p>Duplicated Codeã€‚ä»£ç é‡å¤å‡ ä¹æ˜¯æœ€å¸¸è§çš„å¼‚å‘³äº†ã€‚ä»–ä¹Ÿæ˜¯Refactoring çš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€ã€‚ä»£ç é‡å¤å¾€å¾€æ¥è‡ªäºcopy-and-paste çš„ç¼–ç¨‹é£æ ¼ã€‚ä¸ä»–ç›¸å¯¹åº”OAOO æ˜¯ä¸€ä¸ªå¥½ç³»ç»Ÿçš„é‡è¦æ ‡å¿—ã€‚</p>
</li>
<li><p>Long methodã€‚å®ƒæ˜¯ä¼ ç»Ÿç»“æ„åŒ–çš„â€œé—æ¯’â€ã€‚ä¸€ä¸ªæ–¹æ³•åº”å½“å…·æœ‰è‡ªæˆ‘ç‹¬ç«‹çš„æ„å›¾ï¼Œä¸è¦æŠŠå‡ ä¸ªæ„å›¾æ”¾åœ¨ä¸€èµ·ï¼Œç‰¹åˆ«æ³¨æ„å¤§ç±»å’Œé•¿æ–¹æ³•ã€‚</p>
</li>
<li><p>Large Classã€‚å¤§ç±»å°±æ˜¯ä½ æŠŠå¤ªå¤šçš„è´£ä»»äº¤ç»™äº†ä¸€ä¸ªç±»ã€‚è¿™é‡Œçš„è§„åˆ™æ˜¯One Class Oneã€‚</p>
</li>
<li><p>Divergent Changeã€‚ä¸€ä¸ªç±»é‡Œé¢çš„å†…å®¹å˜åŒ–ç‡ä¸åŒã€‚æŸäº›çŠ¶æ€ä¸€ä¸ªå°æ—¶å˜ä¸€æ¬¡ï¼ŒæŸäº›åˆ™å‡ ä¸ªæœˆä¸€å¹´æ‰å˜ä¸€æ¬¡ï¼›æŸäº›çŠ¶æ€å› ä¸ºè¿™æ–¹é¢çš„åŸå› å‘ç”Ÿå˜åŒ–ï¼Œè€Œå¦ä¸€äº›åˆ™å› ä¸ºå…¶ä»–æ–¹é¢çš„åŸå› å˜ä¸€ æ¬¡ã€‚é¢å‘å¯¹è±¡çš„æŠ½è±¡å°±æ˜¯æŠŠç›¸å¯¹ä¸å˜çš„å’Œç›¸å¯¹å˜åŒ–ç›¸éš”ç¦»ã€‚æŠŠé—®é¢˜å˜åŒ–çš„ä¸€æ–¹é¢å’Œå¦ä¸€æ–¹é¢ç›¸éš”ç¦»ã€‚è¿™ä½¿å¾—è¿™äº›ç›¸å¯¹ä¸å˜çš„å¯ä»¥é‡ç”¨ã€‚é—®é¢˜å˜åŒ–çš„æ¯ä¸ªæ–¹é¢éƒ½å¯ä»¥å• ç‹¬é‡ç”¨ã€‚è¿™ç§ç›¸å¼‚å˜åŒ–çš„å…±å­˜ä½¿å¾—é‡ç”¨éå¸¸å›°éš¾ã€‚</p>
</li>
<li><p>Shotgun Surgeryã€‚è¿™æ­£å¥½å’Œä¸Šé¢ç›¸åã€‚å¯¹ç³»ç»Ÿä¸€ä¸ªåœ°æ–¹çš„æ”¹å˜æ¶‰åŠåˆ°å…¶ä»–è®¸å¤šåœ°æ–¹çš„ç›¸å…³æ”¹å˜ã€‚è¿™äº›å˜åŒ–ç‡å’Œå˜åŒ–å†…å®¹ç›¸ä¼¼çš„çŠ¶æ€å’Œè¡Œä¸ºé€šå¸¸åº”å½“æ”¾åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚</p>
</li>
<li><p>Feature Envyã€‚å¯¹è±¡çš„ç›®çš„å°±æ˜¯å°è£…çŠ¶æ€ä»¥åŠä¸è¿™äº›çŠ¶æ€ç´§å¯†ç›¸å…³çš„è¡Œä¸ºã€‚å¦‚æœä¸€ä¸ªç±»çš„æ–¹æ³•é¢‘ç¹ç”¨get æ–¹æ³•å­˜å–å…¶ä»–ç±»çš„çŠ¶æ€è¿›è¡Œè®¡ç®—ï¼Œé‚£ä¹ˆä½ è¦è€ƒè™‘æŠŠè¡Œä¸ºç§»åˆ°æ¶‰åŠçŠ¶æ€æ•°ç›®æœ€å¤šçš„é‚£ä¸ªç±»ã€‚</p>
</li>
<li><p>Data Clumpsã€‚æŸäº›æ•°æ®é€šå¸¸åƒå­©å­ä¸€æ ·æˆç¾¤ç©è€ï¼šä¸€èµ·å‡ºç°åœ¨å¾ˆå¤šç±»çš„æˆå‘˜å˜é‡ä¸­ï¼Œä¸€èµ·å‡ºç°åœ¨è®¸å¤šæ–¹æ³•çš„å‚æ•°ä¸­â€¦â€¦ï¼Œè¿™äº›æ•°æ®æˆ–è®¸åº”è¯¥è‡ªå·±ç‹¬ç«‹å½¢æˆå¯¹è±¡ã€‚</p>
</li>
<li><p>Primitive Obsessionã€‚é¢å‘å¯¹è±¡çš„æ–°æ‰‹é€šå¸¸ä¹ æƒ¯ä½¿ç”¨å‡ ä¸ªåŸå§‹ç±»å‹çš„æ•°æ®æ¥è¡¨ç¤ºä¸€ä¸ªæ¦‚å¿µã€‚è­¬å¦‚å¯¹äºèŒƒå›´ï¼Œä»–ä»¬ä¼šä½¿ç”¨ä¸¤ä¸ªæ•°å­—ã€‚å¯¹äºMoneyï¼Œä»–ä»¬ä¼šç”¨ä¸€ä¸ªæµ®ç‚¹æ•°æ¥è¡¨ç¤ºã€‚å› ä¸ºä½ æ²¡ æœ‰ä½¿ç”¨å¯¹è±¡æ¥è¡¨è¾¾é—®é¢˜ä¸­å­˜åœ¨çš„æ¦‚å¿µï¼Œè¿™ä½¿å¾—ä»£ç å˜çš„éš¾ä»¥ç†è§£ï¼Œè§£å†³é—®é¢˜çš„éš¾åº¦å¤§å¤§å¢åŠ ã€‚å¥½çš„ä¹ æƒ¯æ˜¯æ‰©å……è¯­è¨€æ‰€èƒ½æä¾›åŸå§‹ç±»å‹ï¼Œç”¨å°å¯¹è±¡æ¥è¡¨ç¤ºèŒƒå›´ã€é‡‘é¢ã€ è½¬åŒ–ç‡ã€é‚®æ”¿ç¼–ç ç­‰ç­‰ã€‚</p>
</li>
<li><p>Switch Statementã€‚åŸºäºå¸¸é‡çš„å¼€å…³è¯­å¥æ˜¯OO çš„å¤§æ•Œï¼Œä½ åº”å½“æŠŠä»–å˜ä¸ºå­ç±»ã€state æˆ–strategyã€‚</p>
</li>
<li><p>Parallel Inheritance Hierarchiesã€‚å¹¶è¡Œçš„ç»§æ‰¿å±‚æ¬¡æ˜¯shotgun surgery çš„ç‰¹æ®Šæƒ…å†µã€‚å› ä¸ºå½“ä½ æ”¹å˜ä¸€ä¸ªå±‚æ¬¡ä¸­çš„æŸä¸€ä¸ªç±»æ—¶ï¼Œä½ å¿…é¡»åŒæ—¶æ”¹å˜å¦å¤–ä¸€ä¸ªå±‚æ¬¡çš„å¹¶è¡Œå­ç±»ã€‚</p>
</li>
<li><p>Lazy Classã€‚ä¸€ä¸ªå¹²æ´»ä¸å¤šçš„ç±»ã€‚ç±»çš„ç»´æŠ¤éœ€è¦é¢å¤–çš„å¼€é”€ï¼Œå¦‚æœä¸€ä¸ªç±»æ‰¿æ‹…äº†å¤ªå°‘çš„è´£ä»»ï¼Œåº”å½“æ¶ˆé™¤å®ƒã€‚</p>
</li>
<li><p>Speculative Generalityã€‚ä¸€ä¸ªç±»å®ç°äº†ä»æœªç”¨åˆ°çš„åŠŸèƒ½å’Œé€šç”¨æ€§ã€‚é€šå¸¸è¿™æ ·çš„ç±»æˆ–æ–¹æ³•å”¯ä¸€çš„ç”¨æˆ·æ˜¯test caseã€‚ä¸è¦çŠ¹è±«ï¼Œåˆ é™¤å®ƒã€‚</p>
</li>
<li><p>Temporary Fieldã€‚ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å¯èƒ½åªåœ¨æŸäº›æƒ…å†µä¸‹æ‰æœ‰æ„ä¹‰ã€‚è¿™æ ·çš„ä»£ç å°†éš¾ä»¥ç†è§£ã€‚ä¸“é—¨å»ºç«‹ä¸€ä¸ªå¯¹è±¡æ¥æŒæœ‰è¿™æ ·çš„å­¤å„¿å±æ€§ï¼ŒæŠŠåªå’Œä»–ç›¸å…³çš„è¡Œä¸ºç§»åˆ°è¯¥ç±»ã€‚æœ€å¸¸è§çš„æ˜¯ä¸€ä¸ªç‰¹å®šçš„ç®—æ³•éœ€è¦æŸäº›åªæœ‰è¯¥ç®—æ³•æ‰æœ‰ç”¨çš„å˜é‡ã€‚</p>
</li>
<li><p>Message Chainã€‚æ¶ˆæ¯é“¾å‘ç”Ÿäºå½“ä¸€ä¸ªå®¢æˆ·å‘ä¸€ä¸ªå¯¹è±¡è¦æ±‚å¦ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå®¢æˆ·åˆå‘è¿™å¦ä¸€å¯¹è±¡è¦æ±‚å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå†å‘è¿™å¦ä¸€ä¸ªå¯¹è±¡è¦æ±‚å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æ­¤å¦‚æ­¤ã€‚è¿™æ—¶ï¼Œä½ éœ€è¦éšè—åˆ†æ´¾ã€‚</p>
</li>
<li><p>Middle Manã€‚å¯¹è±¡çš„åŸºæœ¬ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯å°è£…ï¼Œè€Œä½ ç»å¸¸ä¼šé€šè¿‡åˆ†æ´¾å»å®ç°å°è£…ã€‚ä½†æ˜¯è¿™ä¸€æ­¥ä¸èƒ½èµ°å¾—å¤ªè¿œï¼Œå¦‚æœä½ å‘ç°ä¸€ä¸ªç±»æ¥å£çš„ä¸€å¤§åŠæ–¹æ³•éƒ½åœ¨åšåˆ†æ´¾ï¼Œä½ å¯èƒ½éœ€è¦ç§»å»è¿™ä¸ªä¸­é—´äººã€‚</p>
</li>
<li><p>Inappropriate Intimacyã€‚æŸäº›ç±»ç›¸äº’ä¹‹é—´å¤ªäº²å¯†ï¼Œå®ƒä»¬èŠ±è´¹äº†å¤ªå¤šçš„æ—¶é—´å»ç –ç ”åˆ«äººçš„ç§æœ‰éƒ¨åˆ†ã€‚å¯¹äººç±»è€Œè¨€ï¼Œæˆ‘ä»¬ä¹Ÿè®¸ä¸åº”è¯¥å¤ªå‡æ­£ç»ï¼Œä½†æˆ‘ä»¬åº”å½“è®©è‡ªå·±çš„ç±»ä¸¥æ ¼éµå®ˆç¦æ¬²ä¸»ä¹‰ã€‚</p>
</li>
<li><p>Alternative Classes with Different Interfacesã€‚åšç›¸åŒäº‹æƒ…çš„æ–¹æ³•æœ‰ä¸åŒçš„å‡½æ•°signatureï¼Œä¸€è‡´æŠŠå®ƒä»¬å¾€ç±»å±‚æ¬¡ä¸Šç§»ï¼Œç›´è‡³åè®®ä¸€è‡´ã€‚</p>
</li>
<li><p>Incomplete Library Classã€‚è¦å»ºç«‹ä¸€ä¸ªå¥½çš„ç±»åº“éå¸¸å›°éš¾ã€‚æˆ‘ä»¬å¤§é‡çš„ç¨‹åºå·¥ä½œéƒ½åŸºäºç±»åº“å®ç°ã€‚ç„¶è€Œï¼Œå¦‚æ­¤å¹¿æ³›è€Œåˆç›¸å¼‚çš„ç›®æ ‡å¯¹åº“æ„å»ºè€…æå‡ºäº†è‹›åˆ»çš„è¦æ±‚ã€‚åº“æ„å»ºè€…ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€‚æœ‰æ—¶ å€™æˆ‘ä»¬ä¼šå‘ç°åº“ç±»æ— æ³•å®ç°æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½ã€‚è€Œç›´æ¥å¯¹åº“ç±»çš„ä¿®æ”¹æœ‰éå¸¸å›°éš¾ã€‚è¿™æ—¶å€™å°±éœ€è¦ç”¨å„ç§æ‰‹æ®µè¿›è¡ŒRefactoringã€‚</p>
</li>
<li><p>Data Classã€‚å¯¹è±¡åŒ…æ‹¬çŠ¶æ€å’Œè¡Œä¸ºã€‚å¦‚æœä¸€ä¸ªç±»åªæœ‰çŠ¶æ€æ²¡æœ‰è¡Œä¸ºï¼Œé‚£ä¹ˆè‚¯å®šæœ‰ä»€ä¹ˆåœ°æ–¹å‡ºé—®é¢˜äº†ã€‚</p>
</li>
<li><p>Refused Bequestã€‚è¶…ç±»ä¼ ä¸‹æ¥å¾ˆå¤šè¡Œä¸ºå’ŒçŠ¶æ€ï¼Œè€Œå­ç±»åªæ˜¯ç”¨äº†å…¶ä¸­çš„å¾ˆå°ä¸€éƒ¨åˆ†ã€‚è¿™é€šå¸¸æ„å‘³ç€ä½ çš„ç±»å±‚æ¬¡æœ‰é—®é¢˜ã€‚</p>
</li>
<li><p>Commentsã€‚ç»å¸¸è§‰å¾—è¦å†™å¾ˆå¤šæ³¨é‡Šè¡¨ç¤ºä½ çš„ä»£ç éš¾ä»¥ç†è§£ã€‚å¦‚æœè¿™ç§æ„Ÿè§‰å¤ªå¤šï¼Œè¡¨ç¤ºä½ éœ€è¦Refactoringã€‚</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è½¬è‡ªï¼š&lt;a href=&quot;http://www.nowamagic.net/librarys/veda/detail/2053&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.nowamagic.net/librarys/veda/det
    
    </summary>
    
      <category term="Code" scheme="http://answerrrrrrrrr.io/categories/Code/"/>
    
    
      <category term="Refactoring" scheme="http://answerrrrrrrrr.io/tags/Refactoring/"/>
    
  </entry>
  
  <entry>
    <title>Mac å®‰è£… mongodb</title>
    <link href="http://answerrrrrrrrr.io/2016/09/22/mac-mongod/"/>
    <id>http://answerrrrrrrrr.io/2016/09/22/mac-mongod/</id>
    <published>2016-09-22T12:35:03.000Z</published>
    <updated>2016-09-27T01:18:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>Mac ä¸‹æŒ‰ç…§<a href="https://docs.mongodb.com/manual/mongo/" target="_blank" rel="external">å®˜ç½‘è¯´æ˜</a> å®‰è£… mongodb å¹¶é…ç½®å¥½<code>PATH</code>åç›´æ¥<code>mongo</code>ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$ brew <span class="keyword">install</span> mongodb</span><br><span class="line">...</span><br><span class="line">$ <span class="keyword">export</span> <span class="keyword">PATH</span>=$<span class="keyword">PATH</span>:/usr/<span class="keyword">local</span>/Cellar/mongodb/<span class="number">3.2</span><span class="number">.9</span>/<span class="keyword">bin</span></span><br><span class="line">$ mongo</span><br><span class="line">MongoDB shell <span class="keyword">version</span>: <span class="number">3.2</span><span class="number">.9</span></span><br><span class="line">connecting <span class="keyword">to</span>: <span class="keyword">test</span></span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span>T20:<span class="number">15</span>:<span class="number">48.787</span>+<span class="number">0800</span> W NETWORK  [thread1] <span class="keyword">Failed</span> <span class="keyword">to</span> <span class="keyword">connect</span> <span class="keyword">to</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">27017</span>, reason: errno:<span class="number">61</span> <span class="keyword">Connection</span> refused</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span>T20:<span class="number">15</span>:<span class="number">48.789</span>+<span class="number">0800</span> E <span class="keyword">QUERY</span>    [thread1] <span class="keyword">Error</span>: couldn<span class="string">'t connect to server 127.0.0.1:27017, connection attempt failed :</span><br><span class="line">connect@src/mongo/shell/mongo.js:229:14</span><br><span class="line">@(connect):1:6</span><br><span class="line"></span><br><span class="line">exception: connect failed</span></span><br></pre></td></tr></table></figure>
<p>å¥½åœ¨ <a href="http://stackoverflow.com/questions/12831939/couldnt-connect-to-server-127-0-0-127017/17220732#17220732" target="_blank" rel="external">Stackoverflow</a> ä¸€ä¸ªç­”æ¡ˆæåˆ°ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰å¯åŠ¨ mongodb service:</p>
<blockquote>
<p>Did you run mongod before running mongo?</p>
<p>I followed installation instructions for mongodb from <a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/" target="_blank" rel="external">http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/</a> and I had the same error as you only when I ran mongo before actually running the mongo process with mongod. I thought installing mongodb would also launch it but you need to launch it manually with mongod before you do anything else that needs mongodb.</p>
</blockquote>
<p>ä¸è¿‡è¿˜æ˜¯æŠ¥é”™ï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">$ mongod</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.094</span>+<span class="number">0800</span> I CONTROL  [initandlisten] MongoDB <span class="string">starting :</span> pid=<span class="number">75109</span> port=<span class="number">27017</span> dbpath=<span class="regexp">/data/</span>db <span class="number">64</span>-bit host=localhost</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten] db version v3<span class="number">.2</span><span class="number">.9</span></span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten] git <span class="string">version:</span> <span class="number">22</span>ec9e93b40c85fc7cae7d56e7d6a02fd811088c</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten] OpenSSL <span class="string">version:</span> OpenSSL <span class="number">1.0</span><span class="number">.2</span>h  <span class="number">3</span> May <span class="number">2016</span></span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten] <span class="string">allocator:</span> system</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten] <span class="string">modules:</span> none</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten] build <span class="string">environment:</span></span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten]     <span class="string">distarch:</span> x86_64</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten]     <span class="string">target_arch:</span> x86_64</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.095</span>+<span class="number">0800</span> I CONTROL  [initandlisten] <span class="string">options:</span> &#123;&#125;</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.097</span>+<span class="number">0800</span> I -        [initandlisten] Detected data files <span class="keyword">in</span> <span class="regexp">/data/</span>db created by the <span class="string">'mmapv1'</span> storage engine, so setting the active storage engine to <span class="string">'mmapv1'</span>.</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T20:</span><span class="number">28</span>:<span class="number">37.100</span>+<span class="number">0800</span> I STORAGE  [initandlisten] exception <span class="keyword">in</span> <span class="string">initAndListen:</span> <span class="number">98</span> Unable to create<span class="regexp">/open lock file: /</span>data<span class="regexp">/db/</span>mongod.lock <span class="string">errno:</span><span class="number">13</span> Permission denied Is a mongod instance already running?, terminating</span><br><span class="line">2016-09-22T20:<span class="number">28</span>:<span class="number">37.100</span>+<span class="number">0800</span> I CONTROL  [initandlisten] <span class="string">dbexit:</span>  <span class="string">rc:</span> <span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>çœ‹è§<code>lock file</code>ä¹ æƒ¯æ€§æƒ³å»åˆ æ‰ï¼Œç»“æœä¾ç„¶ä¸è¡Œ</p>
<p>æœ€åè¿˜æ˜¯åœ¨ <a href="http://stackoverflow.com/questions/15229412/unable-to-create-open-lock-file-data-mongod-lock-errno13-permission-denied/22623543#22623543" target="_blank" rel="external">Stackoverflow</a> æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">$ sudo chown -R $USER <span class="regexp">/data/</span>db</span><br><span class="line">$ mongod</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten] MongoDB <span class="string">starting :</span> pid=<span class="number">75729</span> port=<span class="number">27017</span> dbpath=<span class="regexp">/data/</span>db <span class="number">64</span>-bit host=localhost</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten] db version v3<span class="number">.2</span><span class="number">.9</span></span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten] git <span class="string">version:</span> <span class="number">22</span>ec9e93b40c85fc7cae7d56e7d6a02fd811088c</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten] OpenSSL <span class="string">version:</span> OpenSSL <span class="number">1.0</span><span class="number">.2</span>h  <span class="number">3</span> May <span class="number">2016</span></span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten] <span class="string">allocator:</span> system</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten] <span class="string">modules:</span> none</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten] build <span class="string">environment:</span></span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten]     <span class="string">distarch:</span> x86_64</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.066</span>+<span class="number">0800</span> I CONTROL  [initandlisten]     <span class="string">target_arch:</span> x86_64</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.067</span>+<span class="number">0800</span> I CONTROL  [initandlisten] <span class="string">options:</span> &#123;&#125;</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.069</span>+<span class="number">0800</span> I -        [initandlisten] Detected data files <span class="keyword">in</span> <span class="regexp">/data/</span>db created by the <span class="string">'mmapv1'</span> storage engine, so setting the active storage engine to <span class="string">'mmapv1'</span>.</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.096</span>+<span class="number">0800</span> I JOURNAL  [initandlisten] journal dir=<span class="regexp">/data/</span>db/journal</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.096</span>+<span class="number">0800</span> I JOURNAL  [initandlisten] <span class="string">recover :</span> no journal files present, no recovery needed</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.112</span>+<span class="number">0800</span> I JOURNAL  [durability] Durability thread started</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.112</span>+<span class="number">0800</span> I JOURNAL  [journal writer] Journal writer thread started</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.438</span>+<span class="number">0800</span> I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory <span class="string">'/data/db/diagnostic.data'</span></span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.438</span>+<span class="number">0800</span> I NETWORK  [HostnameCanonicalizationWorker] Starting hostname canonicalization worker</span><br><span class="line"><span class="number">2016</span><span class="number">-09</span><span class="number">-22</span><span class="string">T21:</span><span class="number">08</span>:<span class="number">07.439</span>+<span class="number">0800</span> I NETWORK  [initandlisten] waiting <span class="keyword">for</span> connections on port <span class="number">27017</span></span><br></pre></td></tr></table></figure>
<p>å¼€å¯<code>mongod</code>åå†<code>mongo</code>å°±å¯ä»¥äº†</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">$ mongo</span><br><span class="line">MongoDB <span class="built_in">shell</span> <span class="built_in">version</span>: <span class="number">3.2</span><span class="number">.9</span></span><br><span class="line">connecting <span class="built_in">to</span>: test</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<p>æ„Ÿè§‰ mongodb çš„å®˜æ–¹æ–‡æ¡£æœ‰ç‚¹æ‰é“¾å­å•Šâ€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Mac ä¸‹æŒ‰ç…§&lt;a href=&quot;https://docs.mongodb.com/manual/mongo/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®˜ç½‘è¯´æ˜&lt;/a&gt; å®‰è£… mongodb å¹¶é…ç½®å¥½&lt;code&gt;PATH&lt;/code&gt;åç›´æ¥&lt;code&gt;
    
    </summary>
    
      <category term="Mac" scheme="http://answerrrrrrrrr.io/categories/Mac/"/>
    
    
      <category term="Mac" scheme="http://answerrrrrrrrr.io/tags/Mac/"/>
    
      <category term="mongodb" scheme="http://answerrrrrrrrr.io/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>å‘½ä»¤è¡Œè°ƒç”¨ idapython è„šæœ¬</title>
    <link href="http://answerrrrrrrrr.io/2016/09/20/idapython-commandline/"/>
    <id>http://answerrrrrrrrr.io/2016/09/20/idapython-commandline/</id>
    <published>2016-09-20T02:40:41.000Z</published>
    <updated>2016-09-20T10:08:08.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><ol>
<li><p>å®‰è£… Python 2.7</p>
</li>
<li><p>ä¸‹è½½ <a href="https://github.com/idapython/bin/raw/master/idapython-6.9.0-python2.7-mac.zip" target="_blank" rel="external">https://github.com/idapython/bin/raw/master/idapython-6.9.0-python2.7-mac.zip</a> å¹¶è§£å‹</p>
</li>
<li><p>å°† Python å†…çš„æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ° IDA æ ¹ç›®å½•çš„ Python å†…ï¼ˆæ²¡æœ‰å°±æ–°å»ºï¼‰</p>
</li>
<li><p>å°† Plugins å†…çš„æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ° IDA æ ¹ç›®å½•çš„ Plugins å†…</p>
</li>
<li><p>å°† python.cfg å¤åˆ¶åˆ° IDA æ ¹ç›®å½•çš„ cfg å†…</p>
</li>
<li><p>é‡å¯ IDAï¼ŒFile èœå•ä¸‹é¢ä¼šæœ‰ Python Command é€‰é¡¹ï¼Œè€Œä¸” Script files é€‰é¡¹ä¸­å¯ä»¥é€‰æ‹© py æ–‡ä»¶</p>
</li>
</ol>
<p>python ç›®å½•ä¸­çš„å››ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li>init.py æ˜¯åˆå§‹çš„åŸºç¡€æ–‡ä»¶</li>
<li>idaapi.py ä¸­å¯¼å…¥äº† _idaapi æ¨¡å—ï¼Œè¿™ä¸ªä»¥ä¸‹åˆ’çº¿å¼€å§‹çš„ idaapi æ¨¡å—å°±æ˜¯å¯¹ IDA API çš„ä½å±‚å°è£…ï¼Œidaapi.py åˆ™æ˜¯ä½œä¸ºè°ƒç”¨ IDA API çš„ç”¨æˆ·å±‚</li>
<li>idautils.py æä¾›äº†ä¸€äº›é«˜çº§åŠŸèƒ½çš„å‡½æ•°</li>
<li>idc.py åˆ™æ˜¯å¯¹ IDA å†…ç½®çš„ IDC è„šæœ¬è¯­è¨€çš„å…¼å®¹</li>
</ul>
<h1 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h1><p>è°ƒç”¨ idapython è„šæœ¬æ—¶æ€»æ˜¯è¦é¼ æ ‡ç‚¹æ¥ç‚¹å»å¾ˆä¸æ–¹ä¾¿ï¼Œåœ¨å®˜ç½‘æ‰¾äº†æ‰¾ </p>
<p><a href="https://www.hex-rays.com/products/ida/support/idadoc/417.shtml" target="_blank" rel="external">https://www.hex-rays.com/products/ida/support/idadoc/417.shtml</a></p>
<p>è¯¥é¡µé¢æä¾›äº†å‘½ä»¤è¡Œä½¿ç”¨ ida æ—¶çš„å¯ç”¨å‚æ•°ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰ï¼š</p>
<p>-A è®© ida è‡ªåŠ¨è¿è¡Œï¼Œä¸éœ€è¦äººå·¥å¹²é¢„ã€‚ä¹Ÿå°±æ˜¯åœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ä¸ä¼šå¼¹å‡ºäº¤äº’çª—å£ï¼Œä½†æ˜¯å¦‚æœä»æ¥æ²¡æœ‰ä½¿ç”¨è¿‡ ida é‚£ä¹ˆè®¸å¯åè®®çš„çª—å£æ— è®ºä½ æ˜¯å¦ä½¿ç”¨è¿™ä¸ªå‚æ•°éƒ½å°†ä¼šæ˜¾ç¤ºã€‚</p>
<p>-c å‚æ•°ä¼šåˆ é™¤æ‰€æœ‰ä¸å‚æ•°ä¸­æŒ‡å®šçš„æ–‡ä»¶ç›¸å…³çš„æ•°æ®åº“ï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°æ®åº“ã€‚</p>
<p>-S å‚æ•°ç”¨äºæŒ‡å®š ida åœ¨åˆ†æå®Œæ•°æ®ä¹‹åæ‰§è¡Œçš„ idc è„šæœ¬ï¼Œ<strong>æ³¨æ„ï¼šè¯¥é€‰é¡¹å’Œå‚æ•°ä¹‹é—´æ²¡æœ‰ç©ºæ ¼</strong>ï¼Œå¹¶ä¸”æœç´¢ç›®å½•ä¸º ida ç›®å½•ä¸‹çš„ idc ç›®å½•ã€‚</p>
<p>-B å‚æ•°æŒ‡å®šæ‰¹é‡æ¨¡å¼ï¼Œç­‰æ•ˆäº-A â€“c  â€“Sanylysis.idc.åœ¨åˆ†æå®Œæˆåä¼šè‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„æ•°æ®åº“å’Œ asm ä»£ç ã€‚å¹¶ä¸”åœ¨æœ€åå…³é—­ idaï¼Œä»¥ä¿å­˜æ–°çš„æ•°æ®åº“ã€‚</p>
<p><em><a href="http://www.h4ck.org.cn/2012/03/ida-batch-mode/" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a><sup>2</sup>æ¯”è¾ƒè¯¦ç»†åœ°è®²è§£äº†æ‰¹é‡æ¨¡å¼çš„ç”¨æ³•</em> </p>
<h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><figure class="highlight py"><figcaption><span>test.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> idautils <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> idaapi <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> idc</span><br><span class="line"></span><br><span class="line">idc.Wait()	<span class="comment"># idaapi.autoWait()</span></span><br><span class="line"></span><br><span class="line">ea = BeginEA()</span><br><span class="line">dll_functions = []</span><br><span class="line"></span><br><span class="line">fp = open(<span class="string">"fun_output.txt"</span>, <span class="string">"w"</span>)</span><br><span class="line">fp.write(<span class="string">"check"</span>)</span><br><span class="line"><span class="keyword">for</span> funcea <span class="keyword">in</span> Functions(SegStart(ea), SegEnd(ea)):</span><br><span class="line">    functionName = GetFunctionName(funcea)</span><br><span class="line">    dll_functions.append(functionName)</span><br><span class="line">    fp.write(functionName)</span><br><span class="line">    print(functionName)</span><br><span class="line">fp.close()</span><br><span class="line"></span><br><span class="line">idc.Exit(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><em>å…¶ä¸­<code>idc.Wait()</code>è¡¨ç¤ºå¸¦æœ‰<code>-A</code>å‚æ•°æ—¶ï¼Œç­‰å¾… ida è‡ªåŠ¨åˆ†æè¿‡ç¨‹å®Œæˆåå†è¿è¡Œåç»­è„šæœ¬ï¼Œ<code>idc.Exit(0)</code>è¡¨ç¤ºè„šæœ¬è¿è¡Œç»“æŸåè‡ªåŠ¨å…³é—­ ida</em></p>
<p>ä¸è¿‡åœ¨å®é™…æµ‹è¯•æ—¶ï¼Œ<code>idaq -c -A -Stest.py heap_test</code>å¤±è´¥ä¸”æ²¡æœ‰ä»»ä½•é”™è¯¯æç¤ºï¼Œå‚é˜…äº†<a href="http://researchcenter.paloaltonetworks.com/2016/06/unit42-using-idapython-to-make-your-life-easier-part-6/" target="_blank" rel="external">Using IDAPython to Make Your Life Easier: Part 6
</a><sup>3</sup>ï¼Œè„šæœ¬å’Œå‘½ä»¤éƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¸çŸ¥æ˜¯ä¸æ˜¯å› ä¸º Demo ç‰ˆçš„ç¼˜æ•…ã€‚ã€‚ã€‚</p>
<p><code>idaq -c -Stest.py heap_test</code>å€’æ˜¯ä¸€åˆ‡æ­£å¸¸ï¼Œåªå¥½æš‚ä¸”å¦‚æ­¤äº†ã€‚ã€‚ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol>
<li><a href="http://blog.csdn.net/zhangmiaoping23/article/details/14521995" target="_blank" rel="external">http://blog.csdn.net/zhangmiaoping23/article/details/14521995</a></li>
<li><a href="http://www.h4ck.org.cn/2012/03/ida-batch-mode/" target="_blank" rel="external">http://www.h4ck.org.cn/2012/03/ida-batch-mode/</a></li>
<li><a href="http://researchcenter.paloaltonetworks.com/2016/06/unit42-using-idapython-to-make-your-life-easier-part-6/" target="_blank" rel="external">http://researchcenter.paloaltonetworks.com/2016/06/unit42-using-idapython-to-make-your-life-easier-part-6/</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å®‰è£… Python 2.7&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¸‹è½½ &lt;a href=&quot;https://github.com
    
    </summary>
    
      <category term="ida" scheme="http://answerrrrrrrrr.io/categories/ida/"/>
    
    
      <category term="ida" scheme="http://answerrrrrrrrr.io/tags/ida/"/>
    
      <category term="idapython" scheme="http://answerrrrrrrrr.io/tags/idapython/"/>
    
      <category term="idc" scheme="http://answerrrrrrrrr.io/tags/idc/"/>
    
  </entry>
  
  <entry>
    <title>Mac ä¸‹ä½¿ç”¨ homebrew å®‰è£… redis</title>
    <link href="http://answerrrrrrrrr.io/2016/09/12/redis-brew/"/>
    <id>http://answerrrrrrrrr.io/2016/09/12/redis-brew/</id>
    <published>2016-09-12T03:44:37.000Z</published>
    <updated>2016-09-18T02:10:42.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">$ brew install redis</span><br><span class="line">=<span class="function">=&gt;</span> Downloading https:<span class="regexp">//</span>homebrew.bintray.com/bottles/redis<span class="number">-3.2</span><span class="number">.3</span>.el_capitan.bottle.tar.gz</span><br><span class="line"><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span><span class="comment">######</span> <span class="number">100.0</span>%</span><br><span class="line">=<span class="function">=&gt;</span> Pouring redis<span class="number">-3.2</span><span class="number">.3</span>.el_capitan.bottle.tar.gz</span><br><span class="line">=<span class="function">=&gt;</span> Caveats</span><br><span class="line">To have launchd start redis now <span class="keyword">and</span> restart at login:</span><br><span class="line">  brew services start redis</span><br><span class="line">Or, <span class="keyword">if</span> you don<span class="string">'t want/need a background service you can just run:</span><br><span class="line">  redis-server /usr/local/etc/redis.conf</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/redis/3.2.3: 10 files, 1.7M</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å®‰è£…å¥½äº†ï¼Œå¾ˆæ˜¯æ–¹ä¾¿<br>ä¸è¿‡æš‚æ—¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ‰“å¼€<code>redis-server</code>åæ‰èƒ½<code>redis-cli</code>ï¼Œå¦åˆ™æç¤º<code>not connected</code>   </p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">$ redis-cli</span><br><span class="line">Could <span class="keyword">not</span> connect <span class="keyword">to</span> Redis <span class="keyword">at</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>: Connection refused</span><br><span class="line">Could <span class="keyword">not</span> connect <span class="keyword">to</span> Redis <span class="keyword">at</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>: Connection refused</span><br><span class="line"><span class="keyword">not</span> connected&gt;</span><br></pre></td></tr></table></figure>
<p>å…¶å®<code>brew</code>å¾ˆè´´å¿ƒï¼Œä¹‹å‰å®‰è£…å®Œå·²ç»æé†’è¿‡å¯ä»¥<code>brew services start redis</code>æ¥è‡ªåŠ¨å¯åŠ¨ï¼Œå¦å¤–è¿˜å¯ä»¥ä½¿ç”¨<code>brew info</code>æ¥çœ‹çœ‹æç¤ºä¿¡æ¯</p>
<figure class="highlight haml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">$ brew info redis</span><br><span class="line">redis: stable 3.2.3 (bottled), HEAD</span><br><span class="line">Persistent key-value database, with built-in net interface</span><br><span class="line">http://redis.io/</span><br><span class="line"><span class="comment">/usr/local/Cellar/redis/3.2.3 (10 files, 1.7M) *</span></span><br><span class="line">  Poured from bottle on 2016-09-18 at 09:51:13</span><br><span class="line">From: https://github.com/Homebrew/homebrew-core/blob/master/Formula/redis.rb</span><br><span class="line">=<span class="ruby">=&gt; Options</span><br><span class="line"></span>-<span class="ruby">-with-jemalloc</span><br><span class="line"></span>	Select jemalloc as memory allocator when building Redis</span><br><span class="line">-<span class="ruby">-HEAD</span><br><span class="line"></span>	Install HEAD version</span><br><span class="line">=<span class="ruby">=&gt; Caveats</span><br><span class="line"></span>To have launchd start redis now and restart at login:</span><br><span class="line">  brew services start redis</span><br><span class="line">Or, if you don't want/need a background service you can just run:</span><br><span class="line">  redis-server /usr/local/etc/redis.conf</span><br><span class="line">$ brew services start redis</span><br><span class="line">=<span class="ruby">=&gt; Tapping homebrew/services</span><br><span class="line"></span>Cloning into '/usr/local/Library/Taps/homebrew/homebrew-services'...</span><br><span class="line">remote: Counting objects: 7, done.</span><br><span class="line">remote: Compressing objects: 100% (6/6), done.</span><br><span class="line">remote: Total 7 (delta 0), reused 3 (delta 0), pack-reused 0</span><br><span class="line">Unpacking objects: 100% (7/7), done.</span><br><span class="line">Checking connectivity... done.</span><br><span class="line">Tapped 0 formulae (32 files, 46.3K)</span><br><span class="line">=<span class="ruby">=&gt; Successfully started <span class="string">`redis`</span> (<span class="symbol">label:</span> homebrew.mxcl.redis)</span><br><span class="line"></span>$ redis-cli</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥äº†</p>
]]></content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight coffeescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ brew install redis&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;
    
    </summary>
    
      <category term="redis" scheme="http://answerrrrrrrrr.io/categories/redis/"/>
    
    
      <category term="redis" scheme="http://answerrrrrrrrr.io/tags/redis/"/>
    
      <category term="brew" scheme="http://answerrrrrrrrr.io/tags/brew/"/>
    
      <category term="mac" scheme="http://answerrrrrrrrr.io/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>Q åˆ¤æ–­ Gadget æ—¶é‡åˆ° align ä¼ªæŒ‡ä»¤çš„é—®é¢˜</title>
    <link href="http://answerrrrrrrrr.io/2016/08/23/Q%E5%88%A4%E6%96%ADGadget%E6%97%B6%E9%81%87%E5%88%B0align%E4%BC%AA%E6%8C%87%E4%BB%A4%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>http://answerrrrrrrrr.io/2016/08/23/Qåˆ¤æ–­Gadgetæ—¶é‡åˆ°alignä¼ªæŒ‡ä»¤çš„é—®é¢˜/</id>
    <published>2016-08-23T05:13:57.000Z</published>
    <updated>2016-08-23T07:51:25.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨åˆ©ç”¨ Q åˆ¤æ–­ Gadget æ—¶å‘ç°ï¼Œåœ¨ IDA ä¸­é™æ€åˆ†ææ—¶æ˜¾ç¤ºå¦‚ä¸‹çš„æŒ‡ä»¤ç‰‡æ®µï¼š</p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"><span class="meta">align</span> <span class="number">10h</span></span><br><span class="line"><span class="keyword">ret</span></span><br></pre></td></tr></table></figure>
<p>ä¼šè¢«åˆ¤æ–­ä¸º Gadgetï¼Œå¹¶ä¸”è¿˜è«åå…¶å¦™æ‰¯ä¸Šäº† esi</p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line">8d7600c3</span><br><span class="line">MoveReg(Address: <span class="number">0x40000</span>, Complexity <span class="number">0.67</span>, Stack <span class="number">0x4</span>, <span class="built_in">Ip</span> <span class="number">0x0</span>, Output: <span class="built_in">esi</span>, Inputs [<span class="built_in">esi</span>])</span><br><span class="line">AndGadget(Address: <span class="number">0x40000</span>, Complexity <span class="number">0.67</span>, Stack <span class="number">0x4</span>, <span class="built_in">Ip</span> <span class="number">0x0</span>, Output: <span class="built_in">esi</span>, Inputs [<span class="built_in">esi</span>, <span class="built_in">esi</span>])</span><br><span class="line">OrGadget(Address: <span class="number">0x40000</span>, Complexity <span class="number">0.67</span>, Stack <span class="number">0x4</span>, <span class="built_in">Ip</span> <span class="number">0x0</span>, Output: <span class="built_in">esi</span>, Inputs [<span class="built_in">esi</span>, <span class="built_in">esi</span>])</span><br></pre></td></tr></table></figure>
<p>å®åœ¨ç™¾æ€ä¸å¾—å…¶è§£   </p>
<p>æŒ‰ç†è¯´<code>ä¼ªæŒ‡ä»¤</code>å¹¶æ²¡æœ‰å®é™…çš„æœºå™¨ç ä¸ä¹‹å¯¹åº”ï¼Œä½†æ˜¯<code>ret</code>å¯¹åº”<code>c3</code>ï¼Œé‚£ä¹ˆåªèƒ½è§£é‡Šä¸º<code>align 10h</code>å¯¹åº”<code>8d7600</code>äº†</p>
<p>å¥½åœ¨ Google åˆ°äº†<a href="http://www.codingnow.com/2000/frame.htm?http://www.codingnow.com/2000/essay/align.htm" target="_blank" rel="external">ä¸€ç¯‡æ–‡ç« </a>ï¼Œæåˆ°äº†æ±‡ç¼–å™¨å¤„ç†<code>align</code>ä¼ªæŒ‡ä»¤çš„åŸç†</p>
<blockquote>
<p>æˆ‘åŸæ¥ä»¥ä¸º, VC å°†æ’å…¥ NOP æ¥å¯¹é½ä»£ç , ç»“æœå‘ç°, ä¸ºäº†æé«˜æ•ˆç‡, VC æŒ‰æƒ…å†µå¡«å…¥äº†å•å­—èŠ‚,åŒå­—èŠ‚, ä¸‰å­—èŠ‚æŒ‡ä»¤åšç©ºæ“ä½œ, ä½¿ç©ºæ“ä½œçš„æ—¶é—´æœ€çŸ­. å½“éœ€è¦æ’å…¥ 1 å­—èŠ‚æ—¶, ç†æ‰€å½“ç„¶çš„æ’å…¥ä¸€ä¸ª 0x90 (NOP); éœ€è¦æ’å…¥ 2 å­—èŠ‚æ—¶åˆ™æ˜¯ 0x8b 0xff (MOV DI,DI) è¿™ä¹Ÿæ— å¯åšé, æ­¤æŒ‡ä»¤ä¸ç ´åä»»ä½•å¯„å­˜å™¨, ä¹Ÿä¸å½±å“æ ‡å¿—ä½; å¯éœ€è¦å¡«å…¥ 3 ä¸ªå­—èŠ‚çš„æ—¶å€™, æˆ‘ç”¨çš„ VC6 å´ä»¤äººè´¹è§£çš„å¡«å…¥äº† 0x8d 0x49 0x00 (LEA CX,[BX+DI+00]), å¾ˆæ˜æ˜¾å®ƒå½±å“äº† CX, è€Œé£é­‚çš„ä»£ç å°±æ˜¯å—åˆ°äº†å®ƒçš„å½±å“.</p>
</blockquote>
<p>æˆ‘è¿™æ‰æç„¶å¤§æ‚Ÿï¼Œæ‹¿ capstone åæ±‡ç¼–äº†ä¸€ä¸‹<code>8d7600</code>å¾—åˆ°</p>
<figure class="highlight x86asm"><table><tr><td class="code"><pre><span class="line"><span class="keyword">lea</span>	<span class="built_in">esi</span>, <span class="built_in">dword</span> <span class="built_in">ptr</span> [<span class="built_in">esi</span>]</span><br></pre></td></tr></table></figure>
<p>æœç„¶ï¼Œæ±‡ç¼–å™¨åœ¨å¤„ç†<code>align</code>æ—¶ï¼Œæ’å…¥äº†è¿™æ ·ä¸€ä¸ª<code>ä¸ç ´åä»»ä½•å¯„å­˜å™¨ä¹Ÿä¸å½±å“æ ‡å¿—ä½</code>çš„æŒ‡ä»¤æ¥å®ç°å¯¹é½æ•ˆæœ</p>
<p>è€Œ Qï¼ˆä½¿ç”¨ capstone åæ±‡ç¼–ï¼‰æ¥æ”¶åˆ°ä¼ å…¥çš„æŒ‡ä»¤æ—¶ï¼Œè‡ªç„¶ä¼šæŒ‰ç…§å®é™…çš„æœºå™¨æŒ‡ä»¤è€Œä¸æ˜¯<code>align 10h</code>æ¥è¿›è¡Œ Gadget åˆ¤æ–­ï¼Œæ‰€ä»¥å‡ºç°äº†ä¸Šé¢çš„ç»“æœ</p>
<p>å¤§è‡´å¦‚æ­¤â€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©åœ¨åˆ©ç”¨ Q åˆ¤æ–­ Gadget æ—¶å‘ç°ï¼Œåœ¨ IDA ä¸­é™æ€åˆ†ææ—¶æ˜¾ç¤ºå¦‚ä¸‹çš„æŒ‡ä»¤ç‰‡æ®µï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight x86asm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;sp
    
    </summary>
    
      <category term="Q" scheme="http://answerrrrrrrrr.io/categories/Q/"/>
    
    
      <category term="Q" scheme="http://answerrrrrrrrr.io/tags/Q/"/>
    
      <category term="asm" scheme="http://answerrrrrrrrr.io/tags/asm/"/>
    
      <category term="align" scheme="http://answerrrrrrrrr.io/tags/align/"/>
    
      <category term="capstone" scheme="http://answerrrrrrrrr.io/tags/capstone/"/>
    
      <category term="ida" scheme="http://answerrrrrrrrr.io/tags/ida/"/>
    
  </entry>
  
  <entry>
    <title>Flask-SQLAlchemy ä¸­çš„ relationship &amp; backref</title>
    <link href="http://answerrrrrrrrr.io/2016/08/16/Flask-relationship-backref/"/>
    <id>http://answerrrrrrrrr.io/2016/08/16/Flask-relationship-backref/</id>
    <published>2016-08-16T06:29:07.000Z</published>
    <updated>2016-08-16T08:15:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©é‡çœ‹ Flask æ—¶ï¼Œå‘ç°å¯¹<code>backref</code>ä»ç„¶æ²¡æœ‰ç†è§£é€å½»ã€‚æŸ¥é˜…<a href="http://flask-sqlalchemy.pocoo.org/2.1/models/" target="_blank" rel="external">æ–‡æ¡£</a>åå‘ç°ï¼Œä»¥å‰è¯•å›¾å­¤ç«‹åœ°ç†è§£<code>backref</code>æ˜¯é—®é¢˜ä¹‹æºï¼Œ<code>backref</code>æ˜¯ä¸<code>relationship</code>é…åˆä½¿ç”¨çš„ã€‚</p>
<h1 id="ä¸€å¯¹å¤šå…³ç³»"><a href="#ä¸€å¯¹å¤šå…³ç³»" class="headerlink" title="ä¸€å¯¹å¤šå…³ç³»"></a>ä¸€å¯¹å¤šå…³ç³»</h1><p><code>db.relationship()</code>ç”¨äºåœ¨ä¸¤ä¸ªè¡¨ä¹‹é—´å»ºç«‹<code>ä¸€å¯¹å¤šå…³ç³»</code>ã€‚ä¾‹å¦‚ä¹¦ä¸­ roles è¡¨ä¸­ä¸€ä¸ª User è§’è‰²ï¼Œå¯ä»¥å¯¹åº” users è¡¨ä¸­å¤šä¸ªå®é™…çš„æ™®é€šç”¨æˆ·ã€‚å®ç°è¿™ç§å…³ç³»æ—¶ï¼Œè¦åœ¨â€œå¤šâ€è¿™ä¸€ä¾§åŠ å…¥ä¸€ä¸ªå¤–é”®ï¼ŒæŒ‡å‘â€œä¸€â€è¿™ä¸€ä¾§è”æ¥çš„è®°å½•ã€‚</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Role</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">	<span class="comment"># ...</span></span><br><span class="line">	users = db.relationship(<span class="string">'User'</span>, backref=<span class="string">'role'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">	<span class="comment"># ...</span></span><br><span class="line">	role_id = db.Column(db.Integer, db.ForeignKey(<span class="string">'roles.id'</span>))</span><br></pre></td></tr></table></figure>
<h2 id="relationship-amp-ForeighKey"><a href="#relationship-amp-ForeighKey" class="headerlink" title="relationship &amp; ForeighKey"></a>relationship &amp; ForeighKey</h2><p>å¤§å¤šæ•°æƒ…å†µä¸‹, db.relationship() éƒ½èƒ½è‡ªè¡Œæ‰¾åˆ°å…³ç³»ä¸­çš„å¤–é”®, ä½†æœ‰æ—¶å´æ— æ³•å†³å®šæŠŠ å“ªä¸€åˆ—ä½œä¸ºå¤–é”®ã€‚ ä¾‹å¦‚, å¦‚æœ User æ¨¡å‹ä¸­æœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„åˆ—å®šä¹‰ä¸º Role æ¨¡å‹çš„å¤–é”®, SQLAlchemy å°±ä¸çŸ¥é“è¯¥ä½¿ç”¨å“ªåˆ—ã€‚å¦‚æœæ— æ³•å†³å®šå¤–é”®,ä½ å°±è¦ä¸º db.relationship() æä¾›é¢å¤–å‚æ•°,ä»è€Œç¡®å®šæ‰€ç”¨å¤–é”®ã€‚ï¼ˆè§ä¹¦ P49ï¼‰</p>
<h2 id="relationship-amp-backref"><a href="#relationship-amp-backref" class="headerlink" title="relationship &amp; backref"></a>relationship &amp; backref</h2><p>é€šè¿‡<code>db.relationship()</code>ï¼ŒRole æ¨¡å‹æœ‰äº†ä¸€ä¸ªå¯ä»¥è·å¾—å¯¹åº”è§’è‰²æ‰€æœ‰ç”¨æˆ·çš„å±æ€§<code>users</code>ã€‚é»˜è®¤æ˜¯åˆ—è¡¨å½¢å¼ï¼Œ<code>lazy=&#39;dynamic&#39;</code>æ—¶è¿”å›çš„æ˜¯ä¸€ä¸ª query å¯¹è±¡ã€‚å³<code>relationship</code>æä¾›äº† Role å¯¹ User çš„è®¿é—®ã€‚</p>
<p>è€Œ<code>backref</code>æ­£å¥½ç›¸åï¼Œæä¾›äº† User å¯¹ Role çš„è®¿é—®ã€‚</p>
<p>ä¸å¦¨è®¾ä¸€ä¸ª Role å®ä¾‹ä¸º <code>user_role</code>ï¼Œä¸€ä¸ª User å®ä¾‹ä¸º <code>u</code>ã€‚relationship ä½¿ <code>user_role.users</code> å¯ä»¥è®¿é—®æ‰€æœ‰ç¬¦åˆè§’è‰²çš„ç”¨æˆ·ï¼Œè€Œ backref ä½¿ <code>u.role</code> å¯ä»¥è·å¾—ç”¨æˆ·å¯¹åº”çš„è§’è‰²ã€‚</p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">$ p manage.py shell</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_role = Role.query.filter_by(name=<span class="string">'User'</span>).all()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_role</span><br><span class="line">[&lt;Role <span class="string">u'User'</span>&gt;]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_role = Role.query.filter_by(name=<span class="string">'User'</span>).first()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_role</span><br><span class="line">&lt;Role <span class="string">u'User'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_role.users</span><br><span class="line">&lt;sqlalchemy.orm.dynamic.AppenderBaseQuery object at <span class="number">0x1087c1050</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_role.users.order_by(User.username).all()</span><br><span class="line">[&lt;User <span class="string">u'alice78'</span>&gt;, &lt;User <span class="string">u'andrea86'</span>&gt;, &lt;User <span class="string">u'hmr'</span>&gt;]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Role.query.all()</span><br><span class="line">[&lt;Role <span class="string">u'Moderator'</span>&gt;, &lt;Role <span class="string">u'Administrator'</span>&gt;, &lt;Role <span class="string">u'User'</span>&gt;]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_role.users.count()</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u = User.query.filter_by(username=<span class="string">'hmr'</span>).first()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u</span><br><span class="line">&lt;User <span class="string">u'hmr'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u.role</span><br><span class="line">&lt;Role <span class="string">u'User'</span>&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸€å¯¹ä¸€å…³ç³»"><a href="#ä¸€å¯¹ä¸€å…³ç³»" class="headerlink" title="ä¸€å¯¹ä¸€å…³ç³»"></a>ä¸€å¯¹ä¸€å…³ç³»</h1><p>é™¤äº†ä¸€å¯¹å¤šä¹‹å¤–, è¿˜æœ‰å‡ ç§å…¶ä»–çš„å…³ç³»ç±»å‹ã€‚ä¸€å¯¹ä¸€å…³ç³»å¯ä»¥ç”¨å‰é¢ä»‹ç»çš„ä¸€å¯¹å¤šå…³ç³»è¡¨ç¤º, ä½†è°ƒç”¨ db.relationship() æ—¶è¦æŠŠ uselist è®¾ä¸º False , æŠŠâ€œå¤šâ€å˜æˆâ€œä¸€â€ã€‚ </p>
<h1 id="å¤šå¯¹å¤šå…³ç³»"><a href="#å¤šå¯¹å¤šå…³ç³»" class="headerlink" title="å¤šå¯¹å¤šå…³ç³»"></a>å¤šå¯¹å¤šå…³ç³»</h1><p><code>å¤šå¯¹å¤šå…³ç³»</code>åœ¨ä¹¦ P131 è®²å¾—å¾ˆæ¸…æ¥šã€‚</p>
<p>åœ¨ P134 çš„å®é™…ä¾‹å­ä¸­ï¼Œä½¿ç”¨ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»å®ç°å¤šå¯¹å¤šå…³ç³»ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©é‡çœ‹ Flask æ—¶ï¼Œå‘ç°å¯¹&lt;code&gt;backref&lt;/code&gt;ä»ç„¶æ²¡æœ‰ç†è§£é€å½»ã€‚æŸ¥é˜…&lt;a href=&quot;http://flask-sqlalchemy.pocoo.org/2.1/models/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ–‡æ¡£&lt;
    
    </summary>
    
      <category term="Flask" scheme="http://answerrrrrrrrr.io/categories/Flask/"/>
    
    
      <category term="Flask" scheme="http://answerrrrrrrrr.io/tags/Flask/"/>
    
      <category term="Flask-SQLAlchemy" scheme="http://answerrrrrrrrr.io/tags/Flask-SQLAlchemy/"/>
    
      <category term="relationship" scheme="http://answerrrrrrrrr.io/tags/relationship/"/>
    
      <category term="backref" scheme="http://answerrrrrrrrr.io/tags/backref/"/>
    
  </entry>
  
  <entry>
    <title>hexo-rss-sitemap</title>
    <link href="http://answerrrrrrrrr.io/2016/07/28/hexo-rss-sitemap/"/>
    <id>http://answerrrrrrrrr.io/2016/07/28/hexo-rss-sitemap/</id>
    <published>2016-07-28T02:42:46.000Z</published>
    <updated>2016-07-28T02:56:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©çªç„¶å‘ç°æ²¡ç»™åšå®¢æ·»åŠ <code>RSS</code>è®¢é˜…å’Œ<code>sitemap</code>ï¼ˆç«™ç‚¹åœ°å›¾ï¼Œæ–¹ä¾¿æœç´¢å¼•æ“çš„æ”¶å½•ï¼‰<br>å°è¯•äº†ä¸€ä¸‹å‘è§‰è¿˜æŒºæ–¹ä¾¿çš„   </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-generator-feed <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-baidu-sitemap <span class="comment">--save</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸€å®šè¦åŠ ä¸Š<code>--save</code>ï¼Œå¦åˆ™æ— æ³•<code>generate</code>å¯¹åº”çš„ xml</p>
<p>ç„¶ååœ¨æ ¹ç›®å½•çš„<code>_config.xml</code>åŠ å…¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># RSS &amp; sitemap</span><br><span class="line"># Extensions</span><br><span class="line">Plugins:</span><br><span class="line">- hexo-generator-feed</span><br><span class="line">- hexo-generator-sitemap</span><br><span class="line"></span><br><span class="line"># Feed Atom</span><br><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20</span><br><span class="line"></span><br><span class="line"># sitemap</span><br><span class="line">sitemap:</span><br><span class="line">  path: sitemap.xml</span><br></pre></td></tr></table></figure>
<p>ç„¶å<code>hexo g</code>å³å¯ç”Ÿæˆå¯¹åº” xml</p>
<blockquote>
<p>INFO  Start processing<br>INFO  Files loaded in 650 ms<br>INFO  Generated: atom.xml<br>INFO  Generated: sitemap.xml<br>INFO  2 files generated in 2.47 s</p>
</blockquote>
<p>è¿™æ—¶è®¿é—®å¯¹åº”è·¯å¾„å³å¯éªŒè¯ï¼Œå¦å¤–è¾¹æ ä¹Ÿå¯ä»¥çœ‹è§<code>RSS</code>å›¾æ ‡äº†</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©çªç„¶å‘ç°æ²¡ç»™åšå®¢æ·»åŠ &lt;code&gt;RSS&lt;/code&gt;è®¢é˜…å’Œ&lt;code&gt;sitemap&lt;/code&gt;ï¼ˆç«™ç‚¹åœ°å›¾ï¼Œæ–¹ä¾¿æœç´¢å¼•æ“çš„æ”¶å½•ï¼‰&lt;br&gt;å°è¯•äº†ä¸€ä¸‹å‘è§‰è¿˜æŒºæ–¹ä¾¿çš„   &lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
    
    </summary>
    
      <category term="hexo" scheme="http://answerrrrrrrrr.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://answerrrrrrrrr.io/tags/hexo/"/>
    
      <category term="rss" scheme="http://answerrrrrrrrr.io/tags/rss/"/>
    
      <category term="sitemap" scheme="http://answerrrrrrrrr.io/tags/sitemap/"/>
    
  </entry>
  
  <entry>
    <title>Python ä¸­çš„é—­åŒ…ä¸è£…é¥°å™¨</title>
    <link href="http://answerrrrrrrrr.io/2016/07/25/Python%E9%97%AD%E5%8C%85/"/>
    <id>http://answerrrrrrrrr.io/2016/07/25/Pythoné—­åŒ…/</id>
    <published>2016-07-25T02:18:09.000Z</published>
    <updated>2016-09-30T08:27:29.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Closure-é—­åŒ…"><a href="#Closure-é—­åŒ…" class="headerlink" title="Closure(é—­åŒ…)"></a>Closure(é—­åŒ…)</h1><p>ä»€ä¹ˆæ˜¯é—­åŒ…?ç®€å•è¯´,é—­åŒ…å°±æ˜¯æ ¹æ®ä¸åŒçš„é…ç½®ä¿¡æ¯å¾—åˆ°ä¸åŒçš„ç»“æœã€‚</p>
<p>ä¸“ä¸šçš„è§£é‡Š:é—­åŒ…ï¼ˆClosureï¼‰æ˜¯è¯æ³•é—­åŒ…ï¼ˆLexical Closureï¼‰çš„ç®€ç§°ï¼Œæ˜¯å¼•ç”¨äº†è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚è¿™ä¸ªè¢«å¼•ç”¨çš„è‡ªç”±å˜é‡å°†å’Œè¿™ä¸ªå‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œå³ä½¿å·²ç»ç¦»å¼€äº†åˆ›é€ å®ƒçš„ç¯å¢ƒä¹Ÿä¸ä¾‹å¤–ã€‚æ‰€ä»¥ï¼Œæœ‰å¦ä¸€ç§è¯´æ³•è®¤ä¸ºé—­åŒ…æ˜¯ç”±å‡½æ•°å’Œä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆè€Œæˆçš„å®ä½“ã€‚</p>
<p>æ¦‚å¿µæ€»æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Œä¸‹é¢ç»“åˆç¤ºä¾‹è¯´ä¸‹æˆ‘è‡ªå·±çš„ç†è§£ã€‚</p>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ul>
<li>å¤–éƒ¨å‡½æ•°åŒ…è£¹å†…éƒ¨å‡½æ•°</li>
<li>å¤–éƒ¨å‡½æ•°æœ€ç»ˆè¿”å›ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå³ä¸€ä¸ªå†…éƒ¨å‡½æ•°å®ä¾‹</li>
<li>å¤–éƒ¨å‡½æ•°ä¼ å…¥çš„å‚æ•°ä¸åŒæ—¶ï¼Œä¼šè¿”å›ä¸åŒçš„å†…éƒ¨å‡½æ•°å®ä¾‹</li>
<li>å¤–éƒ¨å‡½æ•°ç”¨äº<code>ç»‘å®š</code>ï¼Œå†…éƒ¨å‡½æ•°ç”¨äº<code>å¤„ç†</code></li>
<li>å¤–éƒ¨å‡½æ•°ç»‘å®šçš„å‚æ•°ä¸º<code>å‡½æ•°</code>æ—¶ï¼Œå³ä¸º<code>è£…é¥°å™¨</code></li>
</ul>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plus</span><span class="params">(augend)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'augend:'</span>, augend</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">plus_inside</span><span class="params">(addend)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'addend:'</span>, addend</span><br><span class="line">        result = augend + addend</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'result:'</span>, result</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> plus_inside</span><br><span class="line"></span><br><span class="line">p20 = plus(<span class="number">20</span>)</span><br><span class="line"><span class="comment"># -&gt; augend: 20</span></span><br><span class="line"><span class="comment"># åªæ‰“å° augend è¯´æ˜å†…éƒ¨å¤„ç†å‡½æ•°å°šæœªæ‰§è¡Œ</span></span><br><span class="line"><span class="comment"># åªæ˜¯å®Œæˆäº†å°† augend ä¸å¤„ç†å‡½æ•°ç»‘å®šçš„æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">p20(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># -&gt; addend: 1</span></span><br><span class="line"><span class="comment"># -&gt; result: 21</span></span><br></pre></td></tr></table></figure>
<h1 id="Decorator-è£…é¥°å™¨"><a href="#Decorator-è£…é¥°å™¨" class="headerlink" title="Decorator(è£…é¥°å™¨)"></a>Decorator(è£…é¥°å™¨)</h1><p>å‰é¢å·²ç»æåˆ°ï¼Œè£…é¥°å™¨æœ¬è´¨å°±æ˜¯å¤–éƒ¨å‡½æ•°ç»‘å®šå‚æ•°ä¸ºå‡½æ•°çš„é—­åŒ…ã€‚</p>
<p>å¦å¤– Python ç»™å®ƒæ·»åŠ äº†ä¸€ä¸ªæ›´ä¼˜é›…çš„è°ƒç”¨æ–¹å¼ï¼Œç”¨åœ¨è¢«ç»‘å®šå‡½æ•°<code>f</code>ä¹‹å‰æ·»åŠ <code>@wrapper</code>çš„æ–¹å¼ï¼Œä»£æ›¿åœ¨è¢«ç»‘å®šå‡½æ•°<code>f</code>å®šä¹‰åä½¿ç”¨<code>f = wrapper(f)</code>æ‰‹åŠ¨èµ‹å€¼çš„æ–¹å¼ï¼Œæ¥è¿›è¡Œç»‘å®šã€‚</p>
<h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">makebold</span><span class="params">(fn)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapped</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;b&gt;"</span> + fn() + <span class="string">"&lt;/b&gt;"</span></span><br><span class="line">    <span class="keyword">return</span> wrapped</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">makeitalic</span><span class="params">(fn)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapped</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;i&gt;"</span> + fn() + <span class="string">"&lt;/i&gt;"</span></span><br><span class="line">    <span class="keyword">return</span> wrapped</span><br><span class="line"></span><br><span class="line"><span class="meta">@makebold</span></span><br><span class="line"><span class="meta">@makeitalic</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello world"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> hello() </span><br><span class="line"><span class="comment"># -&gt; &lt;b&gt;&lt;i&gt;hello world&lt;/i&gt;&lt;/b&gt;</span></span><br><span class="line"><span class="comment"># æ³¨æ„&lt;b&gt;å’Œ&lt;i&gt;çš„é¡ºåº</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¿æŒå‡½æ•°é»˜è®¤å‚æ•°å¸¸æ–°çš„è£…é¥°å™¨"><a href="#ä¿æŒå‡½æ•°é»˜è®¤å‚æ•°å¸¸æ–°çš„è£…é¥°å™¨" class="headerlink" title="ä¿æŒå‡½æ•°é»˜è®¤å‚æ•°å¸¸æ–°çš„è£…é¥°å™¨"></a>ä¿æŒå‡½æ•°é»˜è®¤å‚æ•°å¸¸æ–°çš„è£…é¥°å™¨</h2><p>Cookbook 20.1 é‡Œæœ‰ä¸ªç‰¹åˆ«çš„ä¾‹å­ã€‚</p>
<p>Python é‡Œå‡½æ•°çš„é»˜è®¤å‚æ•°åªåœ¨å‡½æ•°å®šä¹‰æ—¶æ±‚å€¼ä¸€æ¬¡ï¼Œç„¶åå­˜å…¥å‡½æ•°å†…å»ºçš„ func_defaults å…ƒç»„å†…ã€‚å¦‚æœæ˜¯ä¸å¯å˜å‚æ•°ï¼ˆå¦‚ 1ã€â€™qweâ€™ã€None ç­‰ï¼‰ï¼Œå®Œå…¨æ²¡æœ‰é—®é¢˜ï¼›ä½†å¦‚æœæ˜¯ç±»ä¼¼åˆ—è¡¨è¿™æ ·çš„å¯å˜å‚æ•°ï¼Œé‡æ–°è°ƒç”¨å‡½æ•°æ—¶é»˜è®¤çš„åˆ—è¡¨å¯èƒ½å·²ç»é¢ç›®å…¨éã€‚</p>
<p>ä¹¦ä¸­æä¾›äº†ä¸¤ç§è§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•ï¼š</p>
<h3 id="æ ‡å‡†æ–¹æ³•"><a href="#æ ‡å‡†æ–¹æ³•" class="headerlink" title="æ ‡å‡†æ–¹æ³•"></a>æ ‡å‡†æ–¹æ³•</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">packitem</span><span class="params">(item, pkg=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> pkg <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        pkg = []</span><br><span class="line">    pkg.append(item)</span><br><span class="line">    <span class="keyword">return</span> pkg</span><br></pre></td></tr></table></figure>
<h3 id="è£…é¥°å™¨æ–¹æ³•"><a href="#è£…é¥°å™¨æ–¹æ³•" class="headerlink" title="è£…é¥°å™¨æ–¹æ³•"></a>è£…é¥°å™¨æ–¹æ³•</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">freshdefaults</span><span class="params">(f)</span>:</span></span><br><span class="line">    <span class="string">"a decorator to wrap f and keep its default values fresh between calls"</span></span><br><span class="line">    fdefaults = f.func_defaults</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">refresher</span><span class="params">(*args, **kwds)</span>:</span></span><br><span class="line">        f.func_defaults = deepcopy(fdefaults)</span><br><span class="line">        <span class="keyword">return</span> f(*args, **kwds)</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># ç”¨äºåœ¨ print æ—¶åŒºåˆ«ä¸åŒçš„è¢«ç»‘å®šå‡½æ•°ï¼Œ2.4 åæœ‰æ•ˆï¼Œè§ Cookbook 20.1 </span></span><br><span class="line">    refresher.__name__ = f.__name__</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> refresher</span><br><span class="line"></span><br><span class="line"><span class="comment"># usage as a decorator, in python 2.4:</span></span><br><span class="line"><span class="meta">@freshdefaults</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">packitem</span><span class="params">(item, pkg=[])</span>:</span></span><br><span class="line">    pkg.append(item)</span><br><span class="line">    <span class="keyword">return</span> pkg</span><br><span class="line"><span class="comment"># usage in python 2.3: after the function definition, explicitly assign:</span></span><br><span class="line"><span class="comment"># f = freshdefaults(f)</span></span><br></pre></td></tr></table></figure>
<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref."></a>Ref.</h3><ul>
<li><a href="http://www.cnblogs.com/ma6174/archive/2013/04/15/3022548.html" target="_blank" rel="external">http://www.cnblogs.com/ma6174/archive/2013/04/15/3022548.html</a></li>
<li>Cookbook 20.1</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Closure-é—­åŒ…&quot;&gt;&lt;a href=&quot;#Closure-é—­åŒ…&quot; class=&quot;headerlink&quot; title=&quot;Closure(é—­åŒ…)&quot;&gt;&lt;/a&gt;Closure(é—­åŒ…)&lt;/h1&gt;&lt;p&gt;ä»€ä¹ˆæ˜¯é—­åŒ…?ç®€å•è¯´,é—­åŒ…å°±æ˜¯æ ¹æ®ä¸åŒçš„é…ç½®ä¿¡æ¯å¾—åˆ°ä¸åŒçš„ç»“æœã€‚&lt;/p&gt;

    
    </summary>
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/categories/Python/"/>
    
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/tags/Python/"/>
    
      <category term="Closure" scheme="http://answerrrrrrrrr.io/tags/Closure/"/>
    
      <category term="Decorator" scheme="http://answerrrrrrrrr.io/tags/Decorator/"/>
    
      <category term="func_defaults" scheme="http://answerrrrrrrrr.io/tags/func-defaults/"/>
    
  </entry>
  
  <entry>
    <title>å­—ç¬¦é›†ä¸ç¼–ç æ–¹å¼</title>
    <link href="http://answerrrrrrrrr.io/2016/07/06/%E5%AD%97%E7%AC%A6%E9%9B%86%E4%B8%8E%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F/"/>
    <id>http://answerrrrrrrrr.io/2016/07/06/å­—ç¬¦é›†ä¸ç¼–ç æ–¹å¼/</id>
    <published>2016-07-06T11:04:36.000Z</published>
    <updated>2016-08-02T08:56:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥å‰å¯¹ã€Œå­—ç¬¦é›†ä¸ç¼–ç ã€çš„è®¤è¯†å®Œå…¨æ¥æºäº<a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386819196283586a37629844456ca7e5a7faa9b94ee8000" target="_blank" rel="external">å»–é›ªå³°çš„è¿™ç¯‡æ–‡ç« </a>ï¼Œä½†æ˜¯æ€»å®¹æ˜“å¿˜è®°<br>è€Œä¸”ä¾ç¨€è®°å¾—å¾ˆæ—©çš„æ—¶å€™åœ¨çŸ¥ä¹çœ‹åˆ°æ¢æµ·å¤§ç¥æåˆ°è¿‡å­—ç¬¦é›†ä¸ç¼–ç æ˜¯ä¸ä¸€æ ·çš„æ¦‚å¿µ</p>
<p>ä»Šå¤©ä»”ç»†æŸ¥é˜…äº†ä¸€ä¸‹ï¼Œç®—æ˜¯åŸºæœ¬ææ¸…æ¥šäº†ï¼Œè®°å½•å¦‚ä¸‹</p>
<h1 id="å­—ç¬¦é›†ä¸ç¼–ç "><a href="#å­—ç¬¦é›†ä¸ç¼–ç " class="headerlink" title="å­—ç¬¦é›†ä¸ç¼–ç "></a>å­—ç¬¦é›†ä¸ç¼–ç </h1><p>é¡¾åæ€ä¹‰ï¼Œã€Œå­—ç¬¦ã€çš„ã€Œé›†åˆã€ï¼Œæ¯ä¸ªã€Œå­—ç¬¦ã€æœ‰ä¸€ä¸ªå”¯ä¸€çš„ã€Œæ•°å­—ã€ä¸ä¹‹å¯¹åº”<br>è€Œå¦‚ä½•å°†ã€Œæ•°å­—ã€æ”¹å†™æˆå†…å­˜ä¸­çš„ã€Œå­—èŠ‚ã€ï¼Œå³æ‰€è°“çš„ã€Œç¼–ç ã€æˆ–ã€Œç¼–ç æ–¹å¼ã€</p>
<p>ä»¥ä¸‹å¼•è‡ª<a href="https://www.zhihu.com/question/21887246/answer/19631235" target="_blank" rel="external">æ¢æµ·</a>ï¼š</p>
<blockquote>
<p>ã€Œå­—ç¬¦é›†ã€å’Œã€Œç¼–ç ã€ç­‰å‡ ä¸ªå±‚æ¬¡çš„æ¦‚å¿µè¢«å½»åº•åˆ†ç¦»ä¸”æ¨¡å—åŒ–çš„è¿™æ ·ä¸€ä¸ªæ¨¡å‹ï¼Œå…¶å®æ˜¯ Unicode æ—¶ä»£æ‰å¾—åˆ°å¹¿æ³›è®¤åŒçš„ã€‚</p>
<p>è€Œå¯¹äº ASCIIã€GB2312ã€Big5 ä¹‹ç±»çš„é—ç•™ï¼ˆlegacyï¼‰æ–¹æ¡ˆï¼Œå…¶å­—ç¬¦é›†åŠå…¶ç¼–ç çš„å…³ç³»åŸºæœ¬æ˜¯é”å®šçš„ï¼Œæ‰€ä»¥å¸¸å¸¸ç”¨ã€Œå­—ç¬¦ç¼–ç ã€ï¼ˆcharacter encodingï¼‰ã€ã€Œä»£ç é¡µã€ï¼ˆcode pageï¼‰ç­‰æ¦‚å¿µæ¥ç»Ÿç§°å®ƒä»¬é‚£æ ·ä»å­—ç¬¦åˆ°ç¼–ç å­—èŠ‚æµçš„æ•´ä½“æ–¹æ¡ˆã€‚æ¯”å¦‚ ASCII æœ¬èº«å°±æ—¢æ˜¯å­—ç¬¦é›†åˆæ˜¯ç¼–ç æ–¹æ¡ˆï¼Œè€Œ GB2312 ç”¨çš„éƒ½æ˜¯ EUC-CN ç¼–ç æ–¹æ¡ˆã€‚ä½ çš„ç†è§£æ˜¯å¯¹çš„ã€‚</p>
</blockquote>
<h1 id="Unicode-å­—ç¬¦é›†"><a href="#Unicode-å­—ç¬¦é›†" class="headerlink" title="Unicode å­—ç¬¦é›†"></a>Unicode å­—ç¬¦é›†</h1><p>Unicode åŸæœ¬åªæ˜¯ä¸ªå­—ç¬¦é›†ï¼Œ<a href="http://www.freebuf.com/articles/others-articles/25623.html" target="_blank" rel="external">freebuf çš„ä¸€ç¯‡è¯‘æ–‡</a>è®²å¾—å¾ˆç”ŸåŠ¨ï¼š</p>
<blockquote>
<p>Unicode èƒŒåçš„æƒ³æ³•éå¸¸ç®€å•ï¼Œç„¶è€Œå´è¢«æ™®éçš„è¯¯è§£äº†ã€‚Unicode å°±åƒä¸€ä¸ªç”µè¯æœ¬ï¼Œæ ‡è®°ç€å­—ç¬¦å’Œæ•°å­—ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚Joel ç§°ä¹‹ä¸ºã€Œç¥å¥‡æ•°å­—ã€ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½æ˜¯éšæœºæŒ‡å®šçš„ï¼Œè€Œä¸”ä¸ä¼šç»™å‡ºä»»ä½•è§£é‡Šã€‚å®˜æ–¹æœ¯è¯­æ˜¯ç ä½ï¼ˆCode Pointï¼‰ï¼Œæ€»æ˜¯ç”¨ U+ å¼€å¤´ã€‚ç†è®ºä¸Šæ¯ç§è¯­è¨€ä¸­çš„æ¯ç§å­—ç¬¦éƒ½è¢« Unicode åä¼šæŒ‡å®šäº†ä¸€ä¸ªç¥å¥‡æ•°å­—ã€‚ä¾‹å¦‚å¸Œä¼¯æ¥æ–‡ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ¯ ×ï¼Œæ˜¯ U+2135ï¼Œå­—æ¯ A æ˜¯ U+0061ã€‚</p>
<p>Unicode å¹¶ä¸æ¶‰åŠå­—ç¬¦æ˜¯æ€ä¹ˆåœ¨å­—èŠ‚ä¸­è¡¨ç¤ºçš„ï¼Œå®ƒä»…ä»…æŒ‡å®šäº†å­—ç¬¦å¯¹åº”çš„æ•°å­—ï¼Œä»…æ­¤è€Œå·²ã€‚</p>
<p>å…³äº Unicode çš„å…¶å®ƒè¯¯è§£åŒ…æ‹¬ï¼šUnicode æ”¯æŒçš„å­—ç¬¦ä¸Šé™æ˜¯ 65536 ä¸ªï¼ŒUnicode å­—ç¬¦å¿…é¡»å ä¸¤ä¸ªå­—èŠ‚ã€‚å‘Šè¯‰ä½ è¿™äº›çš„äººåº”è¯¥å»æ¢æ¢è„‘å­äº†ã€‚</p>
<p>è®°ä½ï¼ŒUnicode åªæ˜¯ä¸€ä¸ªç”¨æ¥æ˜ å°„å­—ç¬¦å’Œæ•°å­—çš„æ ‡å‡†ã€‚å®ƒå¯¹æ”¯æŒå­—ç¬¦çš„æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œä¹Ÿä¸è¦æ±‚å­—ç¬¦å¿…é¡»å ä¸¤ä¸ªã€ä¸‰ä¸ªæˆ–è€…å…¶å®ƒä»»æ„æ•°é‡çš„å­—èŠ‚ã€‚</p>
</blockquote>
<h1 id="Unicode-ç¼–ç "><a href="#Unicode-ç¼–ç " class="headerlink" title="Unicode ç¼–ç "></a>Unicode ç¼–ç </h1><p>Unicode çš„å®ç°æ–¹å¼ä¸åŒäºç¼–ç æ–¹å¼ã€‚ä¸€ä¸ªå­—ç¬¦çš„ Unicode ç¼–ç æ˜¯ç¡®å®šçš„ã€‚ä½†æ˜¯åœ¨å®é™…ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œç”±äºä¸åŒç³»ç»Ÿå¹³å°çš„è®¾è®¡ä¸ä¸€å®šä¸€è‡´ï¼Œä»¥åŠå‡ºäºèŠ‚çœç©ºé—´çš„ç›®çš„ï¼Œå¯¹ Unicode ç¼–ç çš„å®ç°æ–¹å¼æœ‰æ‰€ä¸åŒã€‚Unicode çš„å®ç°æ–¹å¼ç§°ä¸º  Unicode è½¬æ¢æ ¼å¼ï¼ˆUnicode Transformation Formatï¼Œç®€ç§°ä¸º UTFï¼‰ã€‚</p>
<h2 id="UTF-8-ç¼–ç "><a href="#UTF-8-ç¼–ç " class="headerlink" title="UTF-8 ç¼–ç "></a>UTF-8 ç¼–ç </h2><p>å¦‚æœä¸€ä¸ªä»…åŒ…å«åŸºæœ¬ 7 ä½ ASCII å­—ç¬¦çš„ Unicode æ–‡ä»¶ï¼Œå¦‚æœæ¯ä¸ªå­—ç¬¦éƒ½ä½¿ç”¨ 2 å­—èŠ‚çš„åŸ Unicode ç¼–ç ä¼ è¾“ï¼Œå…¶ç¬¬ä¸€å­—èŠ‚çš„ 8 ä½å§‹ç»ˆä¸º 0 ã€‚è¿™å°±é€ æˆäº†æ¯”è¾ƒå¤§çš„æµªè´¹ã€‚</p>
<p>å¯¹äºè¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ UTF-8 ç¼–ç ï¼Œè¿™æ˜¯ä¸€ç§å˜é•¿ç¼–ç ï¼Œå®ƒå°†åŸºæœ¬ 7 ä½ ASCII å­—ç¬¦ä»ç”¨ 7 ä½ç¼–ç è¡¨ç¤ºï¼Œå ç”¨ä¸€ä¸ªå­—èŠ‚ï¼ˆé¦–ä½è¡¥ 0ï¼‰ã€‚</p>
<p>è€Œé‡åˆ°ä¸å…¶ä»– Unicode å­—ç¬¦æ··åˆçš„æƒ…å†µï¼Œå°†æŒ‰ä¸€å®šç®—æ³•è½¬æ¢ï¼Œæ¯ä¸ªå­—ç¬¦ä½¿ç”¨ 1-3 ä¸ªå­—èŠ‚ç¼–ç ï¼Œå¹¶åˆ©ç”¨é¦–ä½ä¸º 0 æˆ– 1 è¿›è¡Œè¯†åˆ«ã€‚è¿™æ ·å¯¹ä»¥ 7 ä½ ASCII å­—ç¬¦ä¸ºä¸»çš„è¥¿æ–‡æ–‡æ¡£å°±å¤§å¤§èŠ‚çœäº†ç¼–ç é•¿åº¦ï¼ˆå…·ä½“æ–¹æ¡ˆå‚è§ UTF-8ï¼‰ã€‚</p>
<h2 id="UTF-16-ç¼–ç "><a href="#UTF-16-ç¼–ç " class="headerlink" title="UTF-16 ç¼–ç "></a>UTF-16 ç¼–ç </h2><p>ç±»ä¼¼çš„ï¼Œå¦ä¸€ä¸ªæµè¡Œçš„å¯å˜é•¿åº¦ç¼–ç æ–¹æ¡ˆæ˜¯ UTF-16ï¼Œå®ƒä½¿ç”¨ 2 ä¸ªæˆ–è€… 4 ä¸ªå­—èŠ‚æ¥å­˜å‚¨å­—ç¬¦ã€‚ç„¶è€Œï¼Œäººä»¬é€æ¸æ„è¯†åˆ° UTF-16 å¯èƒ½ä¼šæµªè´¹å­˜å‚¨ç©ºé—´ï¼Œä½†é‚£æ˜¯å¦ä¸€ä¸ªè¯é¢˜äº†ã€‚</p>
<h2 id="ç‹­ä¹‰çš„-Unicode-ç¼–ç "><a href="#ç‹­ä¹‰çš„-Unicode-ç¼–ç " class="headerlink" title="ç‹­ä¹‰çš„ Unicode ç¼–ç "></a>ç‹­ä¹‰çš„ Unicode ç¼–ç </h2><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç‹­ä¹‰çš„ Unicode ç¼–ç æ–¹å¼ä¸ ISO 10646 çš„é€šç”¨å­—ç¬¦é›†ï¼ˆUniversal Character Setï¼ŒUCSï¼‰æ¦‚å¿µç›¸å¯¹åº”ï¼Œç›®å‰å®é™…åº”ç”¨çš„ Unicode ç‰ˆæœ¬å¯¹åº”äº UCS-2 ï¼Œä½¿ç”¨ 16 ä½çš„ç¼–ç ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯æ¯ä¸ªå­—ç¬¦å ç”¨ 2 ä¸ªå­—èŠ‚ã€‚</p>
<p>è¿™æ ·ç†è®ºä¸Šä¸€å…±æœ€å¤šå¯ä»¥è¡¨ç¤º 216 å³ 65536 ä¸ªå­—ç¬¦ã€‚åŸºæœ¬æ»¡è¶³å„ç§è¯­è¨€çš„ä½¿ç”¨ã€‚å®é™…ä¸Šå½“å‰ç‰ˆæœ¬çš„ Unicode å°šæœªå¡«æ»¡è¿™ 16 ä½ç¼–ç ï¼Œä¿ç•™äº†å¤§é‡ç©ºé—´ä½œä¸ºç‰¹æ®Šä½¿ç”¨æˆ–å°†æ¥æ‰©å±•ã€‚</p>
<p>ä»¥ Python ä¸ºä¾‹ï¼Œ<code>unicode(s,&#39;utf8&#39;)</code> æ‰€è¿”å›çš„ç»“æœå°±æ˜¯è¿™ç§ç‹­ä¹‰çš„ Unicode ç¼–ç ã€‚</p>
<p>åˆæ˜¯æ¢æµ·åœ¨<a href="https://www.zhihu.com/question/19817672/answer/13055185" target="_blank" rel="external">å»–é›ªå³°ç­”æ¡ˆ</a>çš„è¯„è®ºé‡Œæåˆ°:</p>
<blockquote>
<p>å»–é›ªå³°è¯´çš„ã€ŒUnicodeã€æŒ‡çš„æ˜¯ UCS-2ï¼ˆæ‰€ä»¥ä¸èƒ½æ”¹æˆã€ŒUTF-32ã€ï¼‰ã€‚å½“å¹´åªæœ‰ BMP çš„æ—¶å€™ UCS-2 å’Œ UTF-16 æ˜¯ç­‰ä»·çš„ï¼Œåˆè¢«ç§°ä½œã€ŒUnicodeã€ï¼ˆæ‰€ä»¥è¿™é‡Œä¸æ˜¯ã€ŒUnicode æ˜¯å­—ç¬¦é›†ï¼Œä¸æ˜¯ç¼–ç æ–¹å¼ã€è¿™ä¸ªé—®é¢˜ï¼Œåªæ˜¯ UCS-2 ä¹Ÿè¢«ç§°ä½œã€ŒUnicodeã€è€Œå·²ï¼‰ã€‚ä½†ç°åœ¨è¿™ç§ç”¨ã€ŒUnicodeã€æŒ‡ä»£ UCS-2/UTF-16 çš„åšæ³•å·²ç»è¿‡æ—¶äº†ï¼Œå¾ˆä¸åˆé€‚ã€‚</p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ç®€å•æ€»ç»“ä¸€ä¸‹ï¼ŒUnicode æ˜¯ã€Œå­—ç¬¦é›†ã€è€Œä¸æ˜¯ã€Œç¼–ç ã€ã€‚ä½†ç”±äºå†å²åŸå› ï¼ŒæŸäº›æ—¶å€™æåˆ°çš„ã€ŒUnicode ç¼–ç ã€æŒ‡çš„æ˜¯æ›¾ç»å®šé•¿çš„ UCS-2/UTF-16ï¼ˆç°åœ¨ UTF-16 ä¹Ÿæ˜¯å˜é•¿ï¼‰ã€‚</p>
<p>ç”±äº UTF-8 å¯ä»¥å…¼å®¹ ASCIIï¼Œä¸”å…¶å˜é•¿ç‰¹æ€§èƒ½ç›¸å¯¹é«˜æ•ˆåœ°åˆ©ç”¨ç©ºé—´ï¼Œåœ¨åº”ç”¨æˆ–ä¼ è¾“è¿‡ç¨‹ä¸­ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ UTF-8ã€‚ä¾‹å¦‚ Python shell ä¸­ str ä½¿ç”¨çš„å°±æ˜¯ ASCII(UTF-8)ã€‚</p>
<p>è€Œå†…å­˜ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯è¿™ç§ã€ŒUnicode ç¼–ç ã€ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œç¼–ç è½¬æ¢æ—¶ï¼Œé€šå¸¸å°†å„ç±»ç¼–ç <code>decode</code>æˆã€ŒUnicode ç¼–ç ã€ï¼Œåœ¨<code>encode</code>æˆæœ€ç»ˆç¼–ç å½¢å¼ã€‚</p>
<p>eg:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=<span class="string">'åœ¨'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">'\xe5\x9c\xa8'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=unicode(a,<span class="string">'utf8'</span>) // æˆ– b=a.decode(<span class="string">'utf8'</span>)ï¼Œå…¶ä¸­<span class="string">'utf-8'</span>ç­‰åŒäº<span class="string">'utf8'</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="string">u'\u5728'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.encode(<span class="string">'gbk'</span>)</span><br><span class="line"><span class="string">'\xd4\xda'</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ Python 2.x ç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²å®é™…ä¸Šæ˜¯å­—èŠ‚ä¸²ï¼Œè¿™ç§å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦é•¿åº¦ä¸º 1ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œç­‰åŒäº ASCIIã€‚ï¼ˆå‚è€ƒã€ŠPython Cookbookã€‹1.21ï¼‰</p>
<p>ä¸è¿‡åœ¨ Python 3.x ç‰ˆæœ¬ä¸­ï¼ŒæŠŠ â€˜xxxâ€™ å’Œ uâ€™xxxâ€™ ç»Ÿä¸€æˆäº† Unicode ç¼–ç ï¼Œå³å†™ä¸å†™å‰ç¼€ u éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè€Œä»¥å­—èŠ‚å½¢å¼è¡¨ç¤ºçš„å­—ç¬¦ä¸²åˆ™å¿…é¡»åŠ ä¸Š b å‰ç¼€ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥å‰å¯¹ã€Œå­—ç¬¦é›†ä¸ç¼–ç ã€çš„è®¤è¯†å®Œå…¨æ¥æºäº&lt;a href=&quot;http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386819196283586a3762984
    
    </summary>
    
      <category term="Unicode" scheme="http://answerrrrrrrrr.io/categories/Unicode/"/>
    
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/tags/Python/"/>
    
      <category term="UTF-8" scheme="http://answerrrrrrrrr.io/tags/UTF-8/"/>
    
      <category term="Unicode" scheme="http://answerrrrrrrrr.io/tags/Unicode/"/>
    
  </entry>
  
  <entry>
    <title>AngularJS-ngResource-save</title>
    <link href="http://answerrrrrrrrr.io/2016/07/06/AngularJS-ngResource-save/"/>
    <id>http://answerrrrrrrrr.io/2016/07/06/AngularJS-ngResource-save/</id>
    <published>2016-07-06T06:43:02.000Z</published>
    <updated>2016-07-06T07:14:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>Coursera AngularJS è¯¾ç¨‹çš„æœ€åä¸€ä¸ªä»»åŠ¡ï¼Œæ·»åŠ æäº¤ feedback åˆ° server çš„åŠŸèƒ½<br>ä¹‹å‰å·²ç»å®ç°äº†æ·»åŠ  feedback å¹¶ä¿å­˜åœ¨ client çš„åŠŸèƒ½<br>ç°åœ¨åªéœ€è¦åˆ©ç”¨<code>$resource</code>çš„<code>$save</code>æ–¹æ³•å°† feedback çš„ json å¯¹è±¡<code>post</code>åˆ° server   </p>
<p>æœ¬ä»¥ä¸ºç…§è‘«èŠ¦ç”»ç“¢å¾ˆç®€å•ï¼Œç»“æœæ€»æ˜¯ä¼šæŠ¥é”™å¦‚ä¸‹</p>
<blockquote>
<p>TypeError: feedbackFactory.getFeedbacks(â€¦).$save is not a function</p>
</blockquote>
<p>ä»”ç»†å¯¹ç…§<a href="https://docs.angularjs.org/api/ngResource/service/$resource" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>æ‰¾åˆ°åŸå› ï¼š</p>
<blockquote>
<p>The action methods on the class object or instance object can be invoked with the following parameters:</p>
<ul>
<li>HTTP GET â€œclassâ€ actions: Resource.action([parameters], [success], [error])</li>
<li>non-GET â€œclassâ€ actions: Resource.action([parameters], postData, [success], [error])</li>
<li>non-GET instance actions: instance.$action([parameters], [success], [error])</li>
</ul>
</blockquote>
<p>é—®é¢˜å‡ºåœ¨æˆ‘è¯•å›¾ä½¿ç”¨<code>non-GET &quot;class&quot; actions</code>ï¼Œå´åŠ äº†<code>$</code>ç¬¦å·ä¸”æ²¡æœ‰å¸¦ä¸Š<code>postData</code>   </p>
<p>æ‰€ä»¥è§£å†³æ–¹å¼æœ‰ä¸¤ç§</p>
<h1 id="non-GET-â€œclassâ€-actions"><a href="#non-GET-â€œclassâ€-actions" class="headerlink" title="non-GET â€œclassâ€ actions"></a>non-GET â€œclassâ€ actions</h1><figure class="highlight js"><figcaption><span>services.js</span></figcaption><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">        .constant(<span class="string">"baseURL"</span>, <span class="string">"http://localhost:3000/"</span>)</span><br><span class="line">        .service(<span class="string">'feedbackFactory'</span>, [<span class="string">'$resource'</span>, <span class="string">'baseURL'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$resource,baseURL</span>) </span>&#123; </span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.getFeedbacks = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> $resource(baseURL+<span class="string">"feedback"</span>,<span class="literal">null</span>);</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">        &#125;])</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>controllers.js</span></figcaption><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">        .controller(<span class="string">'FeedbackController'</span>, [<span class="string">'$scope'</span>, <span class="string">'feedbackFactory'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope, feedbackFactory</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">            $scope.feedbacks = feedbackFactory.getFeedbacks().query(</span><br><span class="line">                <span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">                    $scope.feedbacks = response;</span><br><span class="line">                    <span class="built_in">console</span>.log($scope.feedbacks);</span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            $scope.sendFeedback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="built_in">console</span>.log($scope.feedbacks);</span><br><span class="line"></span><br><span class="line">                $scope.feedbacks.push($scope.feedback);</span><br><span class="line">                feedbackFactory.getFeedbacks().save($scope.feedback);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ($scope.feedback.agree &amp;&amp; ($scope.feedback.mychannel == <span class="string">""</span>)) &#123;</span><br><span class="line">                    $scope.invalidChannelSelection = <span class="literal">true</span>;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'incorrect'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    $scope.invalidChannelSelection = <span class="literal">false</span>;</span><br><span class="line">                    $scope.feedback = &#123;mychannel:<span class="string">""</span>, firstName:<span class="string">""</span>, lastName:<span class="string">""</span>, agree:<span class="literal">false</span>, email:<span class="string">""</span> &#125;;</span><br><span class="line">                    $scope.feedbackForm.$setPristine();</span><br><span class="line">                    <span class="built_in">console</span>.log($scope.feedback);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;])</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h1 id="non-GET-instance-actions"><a href="#non-GET-instance-actions" class="headerlink" title="non-GET instance actions"></a>non-GET instance actions</h1><figure class="highlight js"><figcaption><span>service.js</span></figcaption><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">        .constant(<span class="string">"baseURL"</span>, <span class="string">"http://localhost:3000/"</span>)</span><br><span class="line">        .service(<span class="string">'feedbackFactory'</span>, [<span class="string">'$resource'</span>, <span class="string">'baseURL'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$resource,baseURL</span>) </span>&#123; </span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> $resource(baseURL+<span class="string">"feedback/:id"</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        &#125;])</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>controllers.js</span></figcaption><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">        .controller(<span class="string">'FeedbackController'</span>, [<span class="string">'$scope'</span>, <span class="string">'feedbackFactory'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope, feedbackFactory</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// $scope.feedbacks = feedbackFactory.getFeedbacks().query(</span></span><br><span class="line">            <span class="comment">//     function(response)&#123;</span></span><br><span class="line">            <span class="comment">//         $scope.feedbacks = response;</span></span><br><span class="line">            <span class="comment">//         console.log($scope.feedbacks);</span></span><br><span class="line">            <span class="comment">//     &#125;</span></span><br><span class="line">            <span class="comment">// );</span></span><br><span class="line"></span><br><span class="line">            $scope.sendFeedback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">var</span> newFeedback = <span class="keyword">new</span> feedbackFactory($scope.feedback);</span><br><span class="line">                newFeedback.$save();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// $scope.feedbacks.push($scope.feedback);</span></span><br><span class="line">                <span class="comment">// feedbackFactory.getFeedbacks().save($scope.feedback);</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> ($scope.feedback.agree &amp;&amp; ($scope.feedback.mychannel == <span class="string">""</span>)) &#123;</span><br><span class="line">                    $scope.invalidChannelSelection = <span class="literal">true</span>;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'incorrect'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    $scope.invalidChannelSelection = <span class="literal">false</span>;</span><br><span class="line">                    $scope.feedback = &#123;mychannel:<span class="string">""</span>, firstName:<span class="string">""</span>, lastName:<span class="string">""</span>, agree:<span class="literal">false</span>, email:<span class="string">""</span> &#125;;</span><br><span class="line">                    $scope.feedbackForm.$setPristine();</span><br><span class="line">                    <span class="built_in">console</span>.log($scope.feedback);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;])</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>ç”±äºç¬¬äºŒç§æ–¹å¼æ²¡æœ‰åŠ ä¸Š<code>[success], [error]</code>å¤„ç†ï¼Œçœ‹èµ·æ¥è¦ç®€å•è®¸å¤š<br><a href="http://stackoverflow.com/questions/36558499/angularjs-post-changes-to-the-server-using-resource/36564415#36564415" target="_blank" rel="external">Stackoverflow</a> é‡Œä¸€ä½ç–‘ä¼¼è¯¥è¯¾ç¨‹çš„åŒå­¦ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼<br>ä¸è¿‡ç›¸å¯¹æ¥è¯´ç¬¬ä¸€ç§æ–¹å¼è·Ÿå…¶ä»–éƒ¨åˆ†ä»£ç é£æ ¼æ›´ç»Ÿä¸€   </p>
<p>å¤§è‡´å¦‚æ­¤.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Coursera AngularJS è¯¾ç¨‹çš„æœ€åä¸€ä¸ªä»»åŠ¡ï¼Œæ·»åŠ æäº¤ feedback åˆ° server çš„åŠŸèƒ½&lt;br&gt;ä¹‹å‰å·²ç»å®ç°äº†æ·»åŠ  feedback å¹¶ä¿å­˜åœ¨ client çš„åŠŸèƒ½&lt;br&gt;ç°åœ¨åªéœ€è¦åˆ©ç”¨&lt;code&gt;$resource&lt;/code&gt;çš„&lt;code&gt;$sav
    
    </summary>
    
      <category term="AngularJS" scheme="http://answerrrrrrrrr.io/categories/AngularJS/"/>
    
    
      <category term="Coursera" scheme="http://answerrrrrrrrr.io/tags/Coursera/"/>
    
      <category term="JavaScript" scheme="http://answerrrrrrrrr.io/tags/JavaScript/"/>
    
      <category term="AngularJS" scheme="http://answerrrrrrrrr.io/tags/AngularJS/"/>
    
      <category term="ngResource" scheme="http://answerrrrrrrrr.io/tags/ngResource/"/>
    
  </entry>
  
  <entry>
    <title>brackets-live-preview-gulp</title>
    <link href="http://answerrrrrrrrr.io/2016/07/05/brackets-live-preview-gulp/"/>
    <id>http://answerrrrrrrrr.io/2016/07/05/brackets-live-preview-gulp/</id>
    <published>2016-07-05T10:23:57.000Z</published>
    <updated>2016-07-05T10:56:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©å­¦ä¹  Coursera çš„ AngularJS è¯¾ç¨‹æ—¶å°è¯•ä½¿ç”¨<code>ng-include</code>æ·»åŠ æ¨¡æ¿<br>å‘è§‰ Brackets çš„ Live Preview åœ¨ Chrome é‡Œæ€»æ˜¯æ— æ³•æ­£å¸¸æ˜¾ç¤º   </p>
<p><a href="http://blog.csdn.net/aitangyong/article/details/43490117" target="_blank" rel="external">è¿™ç¯‡åšæ–‡</a>æåˆ°ï¼š</p>
<blockquote>
<p>chromeæç¤ºå¾ˆæ˜æ˜¾ï¼šä¸èƒ½è·¨åŸŸè®¿é—®ã€‚é€šè¿‡ä¸Šé¢çš„é”™è¯¯æç¤ºï¼Œå¯ä»¥çœ‹åˆ°:ä½¿ç”¨ng-includeæŒ‡ä»¤çš„æ—¶å€™ï¼Œä¼šç”¨åˆ°AJAXè¯·æ±‚XMLHttpRequestã€‚ä½†æ˜¯æˆ‘ä»¬æ˜¯ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€çš„parent.htmlï¼Œå¹¶æ²¡æœ‰é€šè¿‡webå®¹å™¨è®¿é—®ï¼Œæ‰€ä»¥å­˜åœ¨è·¨åŸŸè®¿é—®é—®é¢˜ï¼ŒåŠ è½½child.htmlä¹Ÿå°±å¤±è´¥äº†ã€‚è§£å†³åŠæ³•å¾ˆç®€å•ï¼šå°†ä»£ç éƒ¨ç½²åˆ°tomcatç­‰webå®¹å™¨ä¸‹ï¼Œé€šè¿‡httpè®¿é—®å³å¯ã€‚</p>
</blockquote>
<p><a href="https://www.coursera.org/learn/angular-js/discussions/weeks/3/threads/rWCY3qGmEeWF6gpqp4BTmQ" target="_blank" rel="external">Coursera Discussions</a> é‡Œä¹Ÿæœ‰äººæåˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æœ‰ 3 ç§è§£å†³æ–¹å¼</p>
<h1 id="gulp"><a href="#gulp" class="headerlink" title="gulp"></a>gulp</h1><p>ä¹‹å‰çš„è¯¾ç¨‹åˆšå¥½æåˆ° gulp å¯ä»¥ä½¿ç”¨ brower-sync å»ºç«‹ä¸€ä¸ª Web å®¹å™¨æ¥è®¿é—®é¡¹ç›®<br>æŠŠ<code>Gulpfile.js</code>ç•¥ä½œä¿®æ”¹ä¹‹å<code>gulp watch</code>å´ä»ç„¶æ— æ³•è®¿é—®   </p>
<p>åœ¨ stackoverflow (<a href="http://stackoverflow.com/questions/32171725/chrome-cant-open-localhost3000-with-gulp-browsersync?rq=1" target="_blank" rel="external">1</a>, <a href="http://stackoverflow.com/questions/30233218/browser-sync-is-blocked-by-chrome-csp" target="_blank" rel="external">2</a>) æ‰¾åˆ°ç­”æ¡ˆï¼Œåˆæ˜¯ Chrome çš„é”…ï¼Œè§¦å‘äº†å…¶<code>Content-Security-Policy</code>   </p>
<p>ä¿®æ”¹ç«¯å£å·å³å¯è§£å†³</p>
<h1 id="Brackets-Live-Preview"><a href="#Brackets-Live-Preview" class="headerlink" title="Brackets Live Preview"></a>Brackets Live Preview</h1><p>å°è¯•ä¹‹åå‘ç°ï¼Œæˆ‘åœ¨é¢„è§ˆå•ä¸ª html æ—¶ï¼Œä½¿ç”¨çš„æ˜¯<code>file</code>åè®®ï¼Œåœ¨ Chrome é‡Œæ— æ³•è·¨åŸŸè®¿é—®<br>è€Œä½¿ç”¨ Brackets æ‰“å¼€æ•´ä¸ªé¡¹ç›®æ—¶ï¼ŒLive Preview å°†é¡¹ç›®æ”¾å…¥äº†è‡ªå»ºçš„ Web å®¹å™¨é‡Œï¼Œä½¿ç”¨çš„æ˜¯<code>http</code>åè®®ï¼Œå³å¯åœ¨ Chrome ä¸­æ­£å¸¸è·¨åŸŸè®¿é—®</p>
<h1 id="http-server-or-json-server"><a href="#http-server-or-json-server" class="headerlink" title="http-server or json-server"></a>http-server or json-server</h1><p>ä½¿ç”¨ node å®‰è£…å…¶å®ƒå°å‹ Web å®¹å™¨åæ”¾å…¥è¿è¡Œä¹Ÿå¯è§£å†³</p>
<p>å¤§è‡´å¦‚æ­¤.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©å­¦ä¹  Coursera çš„ AngularJS è¯¾ç¨‹æ—¶å°è¯•ä½¿ç”¨&lt;code&gt;ng-include&lt;/code&gt;æ·»åŠ æ¨¡æ¿&lt;br&gt;å‘è§‰ Brackets çš„ Live Preview åœ¨ Chrome é‡Œæ€»æ˜¯æ— æ³•æ­£å¸¸æ˜¾ç¤º   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://b
    
    </summary>
    
      <category term="AngularJS" scheme="http://answerrrrrrrrr.io/categories/AngularJS/"/>
    
    
      <category term="Coursera" scheme="http://answerrrrrrrrr.io/tags/Coursera/"/>
    
      <category term="JavaScript" scheme="http://answerrrrrrrrr.io/tags/JavaScript/"/>
    
      <category term="AngularJS" scheme="http://answerrrrrrrrr.io/tags/AngularJS/"/>
    
      <category term="Brackets" scheme="http://answerrrrrrrrr.io/tags/Brackets/"/>
    
      <category term="gulp" scheme="http://answerrrrrrrrr.io/tags/gulp/"/>
    
      <category term="browser-sync" scheme="http://answerrrrrrrrr.io/tags/browser-sync/"/>
    
  </entry>
  
  <entry>
    <title>bootstrap-keyboard-tagIndex</title>
    <link href="http://answerrrrrrrrr.io/2016/06/28/bootstrap-keyboard-tagIndex/"/>
    <id>http://answerrrrrrrrr.io/2016/06/28/bootstrap-keyboard-tagIndex/</id>
    <published>2016-06-28T08:16:57.000Z</published>
    <updated>2016-07-05T10:56:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸¤å¤©åœ¨ Coursera ä¸Šå­¦ä¹  Bootstrap<br>ç¬¬å››å‘¨çš„ä½œä¸šæ˜¯æŠŠé JavaScript å®ç°çš„ Modal æ”¹æˆç”¨ JavaScript å®ç°ï¼ˆ<a href="https://www.coursera.org/learn/web-frameworks/peer/jAXUU/assignment-4-detailed-instructions-and-submissionï¼‰" target="_blank" rel="external">https://www.coursera.org/learn/web-frameworks/peer/jAXUU/assignment-4-detailed-instructions-and-submissionï¼‰</a>   </p>
<p>æŒ‰ç…§ <a href="http://getbootstrap.com/javascript/#modals-methods" target="_blank" rel="external">http://getbootstrap.com/javascript/#modals-methods</a> æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    $(<span class="string">'#reserveButton'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">'#reserveModal'</span>).modal(<span class="string">'toggle'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>ä½œä¸šæ˜¯è§£å†³äº†ï¼Œä½†æ˜¯å‘ç°ä¸€ä¸ªå°é—®é¢˜ï¼šä¸ç®¡æˆ‘æ€ä¹ˆæ”¹<code>keyboard</code>å±æ€§ï¼Œéƒ½ä¸èƒ½ç”¨<code>esc</code>å…³é—­<code>modal</code></p>
<p>æœäº†ä¸€ä¸‹å¾—çŸ¥ï¼šåœ¨<code>modal</code>æ‰€åœ¨<code>div</code>ä¸­åŠ å…¥<code>tabindex=&quot;-1&quot;</code>å±æ€§å³å¯<br>é‚£ä¹ˆé—®é¢˜åˆæ¥äº†â€¦è¿™ä¸ª<code>tabindex=&quot;-1&quot;</code>æ˜¯ä»€ä¹ˆé¬¼â€¦   </p>
<p>æœç´¢åŠ æµ‹è¯•äº†ä¸€ä¸‹ä¹‹åç»ˆäºææ¸…æ¥šäº†<br><code>tabindex</code>ç”¨æ¥å¸®åŠ©é”®ç›˜å…šä½¿ç”¨<code>tab</code>é”®å®šä½ç½‘é¡µå…ƒç´ ï¼ŒæŒ‰å…¶å€¼ç”±å°åˆ°å¤§è·³è½¬ï¼Œé»˜è®¤æ˜¯ 0<br>å¦‚æœå€¼ç›¸ç­‰ï¼Œåˆ™æŒ‰å…ˆåé¡ºåºè·³è½¬</p>
<p>åœ¨æœªåŠ å…¥<code>tabindex=&quot;-1&quot;</code>æ—¶ï¼Œ<code>modal</code>å’Œä¸»é¡µä¸­æ‰€æœ‰å…ƒç´ å€¼éƒ½æ˜¯ 0<br>å½“å‰é”®ç›˜çš„ç„¦ç‚¹ä»ç„¶åœ¨ä¸»é¡µè€Œé<code>modal</code>ä¸Šï¼Œç›¸å½“äºåœ¨ä¸»é¡µæŒ‰<code>esc</code>ï¼Œ<code>modal</code>ç›‘å¬ä¸åˆ°æ‰€ä»¥æ— ä»»ä½•ååº”<br>åŠ å…¥<code>tabindex=&quot;-1&quot;</code>åï¼Œ<code>modal</code>çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œé”®ç›˜ç„¦ç‚¹åˆ°äº†<code>modal</code>ä¸Šï¼Œè¿™æ—¶å†æŒ‰<code>esc</code>å°±èƒ½æ­£ç¡®è§¦å‘å…³é—­<code>modal</code>äº‹ä»¶äº†</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="http://blog.163.com/huan12_8/blog/static/1305190902011274739628/" target="_blank" rel="external">http://blog.163.com/huan12_8/blog/static/1305190902011274739628/</a></li>
<li><a href="https://segmentfault.com/q/1010000004954562" target="_blank" rel="external">https://segmentfault.com/q/1010000004954562</a></li>
<li><a href="http://www.w3school.com.cn/tags/att_standard_tabindex.asp" target="_blank" rel="external">http://www.w3school.com.cn/tags/att_standard_tabindex.asp</a></li>
<li><a href="http://www.mamicode.com/info-detail-494399.html" target="_blank" rel="external">http://www.mamicode.com/info-detail-494399.html</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸¤å¤©åœ¨ Coursera ä¸Šå­¦ä¹  Bootstrap&lt;br&gt;ç¬¬å››å‘¨çš„ä½œä¸šæ˜¯æŠŠé JavaScript å®ç°çš„ Modal æ”¹æˆç”¨ JavaScript å®ç°ï¼ˆ&lt;a href=&quot;https://www.coursera.org/learn/web-frameworks/pe
    
    </summary>
    
      <category term="JavaScript" scheme="http://answerrrrrrrrr.io/categories/JavaScript/"/>
    
    
      <category term="Coursera" scheme="http://answerrrrrrrrr.io/tags/Coursera/"/>
    
      <category term="JavaScript" scheme="http://answerrrrrrrrr.io/tags/JavaScript/"/>
    
      <category term="bootstrap" scheme="http://answerrrrrrrrr.io/tags/bootstrap/"/>
    
      <category term="keyboard" scheme="http://answerrrrrrrrr.io/tags/keyboard/"/>
    
      <category term="tagIndex" scheme="http://answerrrrrrrrr.io/tags/tagIndex/"/>
    
  </entry>
  
  <entry>
    <title>Permission denied (publickey)</title>
    <link href="http://answerrrrrrrrr.io/2016/06/16/git-push-error/"/>
    <id>http://answerrrrrrrrr.io/2016/06/16/git-push-error/</id>
    <published>2016-06-16T00:21:06.000Z</published>
    <updated>2016-06-26T06:37:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æŠŠå­¦ä¹  flask çš„æœ¬åœ°åº“ä¸Šä¼ åˆ° github æ—¶æŠ¥é”™</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">$ git push -u origin master</span><br><span class="line">Permission denied (publickey).</span><br><span class="line">fatal: Could <span class="keyword">not</span> <span class="built_in">read</span> <span class="built_in">from</span> remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have <span class="keyword">the</span> correct access rights</span><br><span class="line"><span class="keyword">and</span> <span class="keyword">the</span> repository exists.</span><br></pre></td></tr></table></figure>
<p>åœ¨ <a href="http://stackoverflow.com/questions/26953071/github-authentication-failed-github-does-not-provide-shell-access" target="_blank" rel="external">stackoverflow</a> æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">git remote set-url origin git@github<span class="selector-class">.com</span>:lut/EvolutionApp<span class="selector-class">.git</span></span><br><span class="line">git remote show origin</span><br></pre></td></tr></table></figure>
<p>ç®€å•è®°å½•ä¸€ä¸‹â€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©æŠŠå­¦ä¹  flask çš„æœ¬åœ°åº“ä¸Šä¼ åˆ° github æ—¶æŠ¥é”™&lt;/p&gt;
&lt;figure class=&quot;highlight livecodeserver&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git pus
    
    </summary>
    
      <category term="git" scheme="http://answerrrrrrrrr.io/categories/git/"/>
    
    
      <category term="git" scheme="http://answerrrrrrrrr.io/tags/git/"/>
    
      <category term="github" scheme="http://answerrrrrrrrr.io/tags/github/"/>
    
      <category term="ssh" scheme="http://answerrrrrrrrr.io/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>Python-Cookbook-1.09 ç®€åŒ– translate æ–¹æ³•</title>
    <link href="http://answerrrrrrrrr.io/2016/05/25/python-cookbook-translator/"/>
    <id>http://answerrrrrrrrr.io/2016/05/25/python-cookbook-translator/</id>
    <published>2016-05-25T13:46:44.000Z</published>
    <updated>2016-07-06T14:07:32.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="string-maketrans"><a href="#string-maketrans" class="headerlink" title="string.maketrans"></a>string.maketrans</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Help</span> <span class="keyword">on</span> built-<span class="keyword">in</span> <span class="keyword">function</span> maketrans <span class="keyword">in</span> <span class="keyword">module</span> strop:</span><br><span class="line"></span><br><span class="line">maketrans(...)</span><br><span class="line">    maketrans(frm, <span class="keyword">to</span>) -&gt; <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">Return</span> a <span class="keyword">translation</span> <span class="keyword">table</span> (a <span class="keyword">string</span> <span class="keyword">of</span> <span class="number">256</span> <span class="keyword">bytes</span> <span class="keyword">long</span>)</span><br><span class="line">    suitable <span class="keyword">for</span> <span class="keyword">use</span> <span class="keyword">in</span> <span class="keyword">string</span>.<span class="keyword">translate</span>.  The strings frm <span class="keyword">and</span> <span class="keyword">to</span></span><br><span class="line">    must be <span class="keyword">of</span> the same <span class="keyword">length</span>.</span><br><span class="line">(<span class="keyword">END</span>)</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆä¸€ä¸ªä¾›<code>string.translate</code>ä½¿ç”¨çš„ ASCII è¡¨ï¼Œå…¶ä¸­<code>frm</code>ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½ä¾åºè¢«æ›¿æ¢æˆ<code>to</code>ä¸­å­—ç¬¦ï¼š</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; maketrans('abc', 'fed')</span><br><span class="line">'<span class="tag">\<span class="name">x</span></span>00<span class="tag">\<span class="name">x</span></span>01<span class="tag">\<span class="name">x</span></span>02<span class="tag">\<span class="name">x</span></span>03<span class="tag">\<span class="name">x</span></span>04<span class="tag">\<span class="name">x</span></span>05<span class="tag">\<span class="name">x</span></span>06<span class="tag">\<span class="name">x</span></span>07<span class="tag">\<span class="name">x</span></span>08<span class="tag">\<span class="name">t</span></span><span class="tag">\<span class="name">n</span></span><span class="tag">\<span class="name">x</span></span>0b<span class="tag">\<span class="name">x</span></span>0c<span class="tag">\<span class="name">r</span></span><span class="tag">\<span class="name">x</span></span>0e<span class="tag">\<span class="name">x</span></span>0f<span class="tag">\<span class="name">x</span></span>10<span class="tag">\<span class="name">x</span></span>11<span class="tag">\<span class="name">x</span></span>12<span class="tag">\<span class="name">x</span></span>13<span class="tag">\<span class="name">x</span></span>14<span class="tag">\<span class="name">x</span></span>15<span class="tag">\<span class="name">x</span></span>16<span class="tag">\<span class="name">x</span></span>17<span class="tag">\<span class="name">x</span></span>18<span class="tag">\<span class="name">x</span></span>19<span class="tag">\<span class="name">x</span></span>1a<span class="tag">\<span class="name">x</span></span>1b<span class="tag">\<span class="name">x</span></span>1c<span class="tag">\<span class="name">x</span></span>1d<span class="tag">\<span class="name">x</span></span>1e<span class="tag">\<span class="name">x</span></span>1f !"#<span class="formula">$%&amp;<span class="tag">\<span class="name">'</span></span>()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[<span class="tag">\<span class="name">\</span></span>]^_`feddefghijklmnopqrstuvwxyz&#123;|&#125;~<span class="tag">\<span class="name">x</span></span>7f<span class="tag">\<span class="name">x</span></span>80<span class="tag">\<span class="name">x</span></span>81<span class="tag">\<span class="name">x</span></span>82<span class="tag">\<span class="name">x</span></span>83<span class="tag">\<span class="name">x</span></span>84<span class="tag">\<span class="name">x</span></span>85<span class="tag">\<span class="name">x</span></span>86<span class="tag">\<span class="name">x</span></span>87<span class="tag">\<span class="name">x</span></span>88<span class="tag">\<span class="name">x</span></span>89<span class="tag">\<span class="name">x</span></span>8a<span class="tag">\<span class="name">x</span></span>8b<span class="tag">\<span class="name">x</span></span>8c<span class="tag">\<span class="name">x</span></span>8d<span class="tag">\<span class="name">x</span></span>8e<span class="tag">\<span class="name">x</span></span>8f<span class="tag">\<span class="name">x</span></span>90<span class="tag">\<span class="name">x</span></span>91<span class="tag">\<span class="name">x</span></span>92<span class="tag">\<span class="name">x</span></span>93<span class="tag">\<span class="name">x</span></span>94<span class="tag">\<span class="name">x</span></span>95<span class="tag">\<span class="name">x</span></span>96<span class="tag">\<span class="name">x</span></span>97<span class="tag">\<span class="name">x</span></span>98<span class="tag">\<span class="name">x</span></span>99<span class="tag">\<span class="name">x</span></span>9a<span class="tag">\<span class="name">x</span></span>9b<span class="tag">\<span class="name">x</span></span>9c<span class="tag">\<span class="name">x</span></span>9d<span class="tag">\<span class="name">x</span></span>9e<span class="tag">\<span class="name">x</span></span>9f<span class="tag">\<span class="name">xa</span></span>0<span class="tag">\<span class="name">xa</span></span>1<span class="tag">\<span class="name">xa</span></span>2<span class="tag">\<span class="name">xa</span></span>3<span class="tag">\<span class="name">xa</span></span>4<span class="tag">\<span class="name">xa</span></span>5<span class="tag">\<span class="name">xa</span></span>6<span class="tag">\<span class="name">xa</span></span>7<span class="tag">\<span class="name">xa</span></span>8<span class="tag">\<span class="name">xa</span></span>9<span class="tag">\<span class="name">xaa</span></span><span class="tag">\<span class="name">xab</span></span><span class="tag">\<span class="name">xac</span></span><span class="tag">\<span class="name">xad</span></span><span class="tag">\<span class="name">xae</span></span><span class="tag">\<span class="name">xaf</span></span><span class="tag">\<span class="name">xb</span></span>0<span class="tag">\<span class="name">xb</span></span>1<span class="tag">\<span class="name">xb</span></span>2<span class="tag">\<span class="name">xb</span></span>3<span class="tag">\<span class="name">xb</span></span>4<span class="tag">\<span class="name">xb</span></span>5<span class="tag">\<span class="name">xb</span></span>6<span class="tag">\<span class="name">xb</span></span>7<span class="tag">\<span class="name">xb</span></span>8<span class="tag">\<span class="name">xb</span></span>9<span class="tag">\<span class="name">xba</span></span><span class="tag">\<span class="name">xbb</span></span><span class="tag">\<span class="name">xbc</span></span><span class="tag">\<span class="name">xbd</span></span><span class="tag">\<span class="name">xbe</span></span><span class="tag">\<span class="name">xbf</span></span><span class="tag">\<span class="name">xc</span></span>0<span class="tag">\<span class="name">xc</span></span>1<span class="tag">\<span class="name">xc</span></span>2<span class="tag">\<span class="name">xc</span></span>3<span class="tag">\<span class="name">xc</span></span>4<span class="tag">\<span class="name">xc</span></span>5<span class="tag">\<span class="name">xc</span></span>6<span class="tag">\<span class="name">xc</span></span>7<span class="tag">\<span class="name">xc</span></span>8<span class="tag">\<span class="name">xc</span></span>9<span class="tag">\<span class="name">xca</span></span><span class="tag">\<span class="name">xcb</span></span><span class="tag">\<span class="name">xcc</span></span><span class="tag">\<span class="name">xcd</span></span><span class="tag">\<span class="name">xce</span></span><span class="tag">\<span class="name">xcf</span></span><span class="tag">\<span class="name">xd</span></span>0<span class="tag">\<span class="name">xd</span></span>1<span class="tag">\<span class="name">xd</span></span>2<span class="tag">\<span class="name">xd</span></span>3<span class="tag">\<span class="name">xd</span></span>4<span class="tag">\<span class="name">xd</span></span>5<span class="tag">\<span class="name">xd</span></span>6<span class="tag">\<span class="name">xd</span></span>7<span class="tag">\<span class="name">xd</span></span>8<span class="tag">\<span class="name">xd</span></span>9<span class="tag">\<span class="name">xda</span></span><span class="tag">\<span class="name">xdb</span></span><span class="tag">\<span class="name">xdc</span></span><span class="tag">\<span class="name">xdd</span></span><span class="tag">\<span class="name">xde</span></span><span class="tag">\<span class="name">xdf</span></span><span class="tag">\<span class="name">xe</span></span>0<span class="tag">\<span class="name">xe</span></span>1<span class="tag">\<span class="name">xe</span></span>2<span class="tag">\<span class="name">xe</span></span>3<span class="tag">\<span class="name">xe</span></span>4<span class="tag">\<span class="name">xe</span></span>5<span class="tag">\<span class="name">xe</span></span>6<span class="tag">\<span class="name">xe</span></span>7<span class="tag">\<span class="name">xe</span></span>8<span class="tag">\<span class="name">xe</span></span>9<span class="tag">\<span class="name">xea</span></span><span class="tag">\<span class="name">xeb</span></span><span class="tag">\<span class="name">xec</span></span><span class="tag">\<span class="name">xed</span></span><span class="tag">\<span class="name">xee</span></span><span class="tag">\<span class="name">xef</span></span><span class="tag">\<span class="name">xf</span></span>0<span class="tag">\<span class="name">xf</span></span>1<span class="tag">\<span class="name">xf</span></span>2<span class="tag">\<span class="name">xf</span></span>3<span class="tag">\<span class="name">xf</span></span>4<span class="tag">\<span class="name">xf</span></span>5<span class="tag">\<span class="name">xf</span></span>6<span class="tag">\<span class="name">xf</span></span>7<span class="tag">\<span class="name">xf</span></span>8<span class="tag">\<span class="name">xf</span></span>9<span class="tag">\<span class="name">xfa</span></span><span class="tag">\<span class="name">xfb</span></span><span class="tag">\<span class="name">xfc</span></span><span class="tag">\<span class="name">xfd</span></span><span class="tag">\<span class="name">xfe</span></span><span class="tag">\<span class="name">xff</span></span>'</span><br><span class="line">&gt;&gt;&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="string-translate"><a href="#string-translate" class="headerlink" title="string.translate"></a>string.translate</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Help</span> <span class="keyword">on</span> <span class="keyword">function</span> <span class="keyword">translate</span> <span class="keyword">in</span> <span class="keyword">module</span> <span class="keyword">string</span>:</span><br><span class="line"></span><br><span class="line"><span class="keyword">translate</span>(s, <span class="keyword">table</span>, deletions=<span class="string">''</span>)</span><br><span class="line">    <span class="keyword">translate</span>(s,<span class="keyword">table</span> [,deletions]) -&gt; <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">Return</span> a copy <span class="keyword">of</span> the <span class="keyword">string</span> s, <span class="keyword">where</span> all <span class="keyword">characters</span> occurring</span><br><span class="line">    <span class="keyword">in</span> the optional argument deletions <span class="keyword">are</span> removed, <span class="keyword">and</span> the</span><br><span class="line">    remaining <span class="keyword">characters</span> have been mapped <span class="keyword">through</span> the given</span><br><span class="line">    <span class="keyword">translation</span> <span class="keyword">table</span>, which must be a <span class="keyword">string</span> <span class="keyword">of</span> <span class="keyword">length</span> <span class="number">256.</span>  The</span><br><span class="line">    deletions argument <span class="keyword">is</span> <span class="keyword">not</span> allowed <span class="keyword">for</span> <span class="keyword">Unicode</span> strings.</span><br><span class="line">(<span class="keyword">END</span>)</span><br></pre></td></tr></table></figure>
<p>(ä¹Ÿå¯ä»¥<code>s.translate(table, deletions=&#39;&#39;)</code>ä¸ºæ ¼å¼ï¼‰</p>
<p>ä»¥<code>maketrans</code>ç”Ÿæˆçš„æ˜ å°„è¡¨ä¸ºåŸºå‡†è¿›è¡Œå­—ç¬¦è½¬æ¢ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; translate(<span class="string">'abcdef'</span>, a)</span><br><span class="line"><span class="string">'feddef'</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; translate(<span class="string">'abcdef'</span>, a, <span class="string">'d'</span>)</span><br><span class="line"><span class="string">'fedef'</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; translate(<span class="string">'abcdef'</span>, a, <span class="string">'dd'</span>)</span><br><span class="line"><span class="string">'fedef'</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; translate(<span class="string">'abcdef'</span>, a, <span class="string">'de'</span>)</span><br><span class="line"><span class="string">'fedf'</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; translate(<span class="string">'abcdef'</span>, a, <span class="string">'ade'</span>)</span><br><span class="line"><span class="string">'edf'</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt;</span><br></pre></td></tr></table></figure>
<h1 id="è‡ªå»ºä¸€ä¸ªè¿”å›é—­åŒ…çš„å·¥å‚å‡½æ•°-translator"><a href="#è‡ªå»ºä¸€ä¸ªè¿”å›é—­åŒ…çš„å·¥å‚å‡½æ•°-translator" class="headerlink" title="è‡ªå»ºä¸€ä¸ªè¿”å›é—­åŒ…çš„å·¥å‚å‡½æ•° translator"></a>è‡ªå»ºä¸€ä¸ªè¿”å›é—­åŒ…çš„å·¥å‚å‡½æ•° translator</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">translator</span><span class="params">(frm=<span class="string">''</span>, to=<span class="string">''</span>, delete=<span class="string">''</span>, keep=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> len(to) == <span class="number">1</span>:</span><br><span class="line">        to = to * len(frm)</span><br><span class="line">    trans = string.maketrans(frm, to)</span><br><span class="line">    <span class="keyword">if</span> keep <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        allchars = string.maketrans(<span class="string">''</span>, <span class="string">''</span>)</span><br><span class="line">        delete = allchars.translate(allchars, keep.translate(allchars, delete))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">translate</span><span class="params">(s)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> s.translate(trans, delete)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> translate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    digits_only = translator(keep=string.digits)</span><br><span class="line">    <span class="keyword">print</span> digits_only(<span class="string">'qwedwefaf24215'</span>)</span><br><span class="line"></span><br><span class="line">    no_digits = translator(delete=string.digits)</span><br><span class="line">    <span class="keyword">print</span> no_digits(<span class="string">'qwedwefaf24215'</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;string-maketrans&quot;&gt;&lt;a href=&quot;#string-maketrans&quot; class=&quot;headerlink&quot; title=&quot;string.maketrans&quot;&gt;&lt;/a&gt;string.maketrans&lt;/h1&gt;&lt;figure class=&quot;hi
    
    </summary>
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/categories/Python/"/>
    
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/tags/Python/"/>
    
      <category term="cookbook" scheme="http://answerrrrrrrrr.io/tags/cookbook/"/>
    
      <category term="closure" scheme="http://answerrrrrrrrr.io/tags/closure/"/>
    
      <category term="factory" scheme="http://answerrrrrrrrr.io/tags/factory/"/>
    
      <category term="string" scheme="http://answerrrrrrrrr.io/tags/string/"/>
    
  </entry>
  
  <entry>
    <title>Python-sortedå‡½æ•°ä¸­keyçš„ç”¨æ³•</title>
    <link href="http://answerrrrrrrrr.io/2016/05/19/Python-sorted%E5%87%BD%E6%95%B0%E4%B8%ADkey%E7%9A%84%E7%94%A8%E6%B3%95/"/>
    <id>http://answerrrrrrrrr.io/2016/05/19/Python-sortedå‡½æ•°ä¸­keyçš„ç”¨æ³•/</id>
    <published>2016-05-19T01:02:08.000Z</published>
    <updated>2016-07-09T09:56:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>sortedå‡½æ•°çš„å¯ç”¨å‚æ•°å¦‚ä¸‹</p>
<blockquote>
<p>sorted(iterable[, cmp[, key[, reverse]]])</p>
</blockquote>
<p>å…¶å®ƒå‡ ä¸ªè¿˜å¥½ç†è§£ï¼Œå°±æ˜¯<code>key</code>çš„ç”¨æ³•ç»å¸¸ä¼šå¿˜è®°ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹å¤‡ç”¨</p>
<p><a href="http://devdocs.io/python~2.7/library/functions#sorted" target="_blank" rel="external">æ–‡æ¡£</a>ä¸­è¯´ï¼š</p>
<blockquote>
<p>key specifies a function of one argument that is used to extract a comparison key from each list element: key=str.lower. The default value is None (compare the elements directly).</p>
</blockquote>
<p>æˆ‘çš„ç†è§£æ˜¯<br><code>key</code>æä¾›äº†ä¸€ä¸ªå‡½æ•°ï¼Œä»¥<code>iterable</code>å¯¹è±¡ä¸­çš„å…ƒç´ ä¸ºå”¯ä¸€å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªä¸åŸå…ƒç´ ä¸€ä¸€å¯¹åº”çš„ key å€¼<br>ç„¶åå†å¯¹ä»¥è¿™äº› key å€¼ä¸ºå…ƒç´ çš„<code>iterable</code>è¿›è¡Œæ’åº<br>æœ€åå°†è¿™äº› key å€¼æ›¿æ¢å›å¯¹åº”çš„åŸå…ƒç´ <br>æ’åºå®Œæˆ</p>
<p>éœ€è¦æ³¨æ„çš„å°±æ˜¯<code>False &lt; True</code></p>
<p>ç„¶åæ˜¯å®ä¾‹ï¼ˆå‚è€ƒ<a href="https://segmentfault.com/q/1010000005111826/a-1020000005112829ï¼‰" target="_blank" rel="external">https://segmentfault.com/q/1010000005111826/a-1020000005112829ï¼‰</a></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">s = <span class="string">'aB23'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sorted_with_key</span><span class="params">(s, key)</span>:</span></span><br><span class="line">    s = sorted(s, key=key)</span><br><span class="line">    <span class="keyword">print</span> s</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'keys: '</span>,</span><br><span class="line">    <span class="keyword">print</span> [key(x) <span class="keyword">for</span> x <span class="keyword">in</span> s]</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'\nstr.lower'</span></span><br><span class="line">sorted_with_key(s, str.lower)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'\nstr.islower'</span></span><br><span class="line">sorted_with_key(s, str.islower)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'\nlambda x: x.isdigit() and int(x) % 2 == 0'</span></span><br><span class="line">sorted_with_key(s, <span class="keyword">lambda</span> x: x.isdigit() <span class="keyword">and</span> int(x) % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'\nlambda x: x.isdigit(), x.isdigit() and int(x) % 2==0, x.isupper(), x.islower(), x'</span></span><br><span class="line"><span class="comment"># æ’åº:å°å†™-å¤§å†™-å¥‡æ•°-å¶æ•°</span></span><br><span class="line">sorted_with_key(s, <span class="keyword">lambda</span> x: (x.isdigit(), x.isdigit() <span class="keyword">and</span> int(x) %</span><br><span class="line">                              <span class="number">2</span> == <span class="number">0</span>, x.isupper(), x.islower(), x))</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">str.lower</span><br><span class="line">[<span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'a'</span>, <span class="string">'B'</span>]</span><br><span class="line">keys:  [<span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>]</span><br><span class="line"></span><br><span class="line">str.islower</span><br><span class="line">[<span class="string">'B'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'a'</span>]</span><br><span class="line">keys:  [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">lambda</span> x: x.isdigit() <span class="keyword">and</span> int(x) % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'B'</span>, <span class="string">'3'</span>, <span class="string">'2'</span>]</span><br><span class="line">keys:  [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">lambda</span> x: (x.isdigit(), x.isdigit() <span class="keyword">and</span> int(x) % <span class="number">2</span>==<span class="number">0</span>, x.isupper(), x.islower(), x)</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'B'</span>, <span class="string">'3'</span>, <span class="string">'2'</span>]</span><br><span class="line">keys:  [(<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="string">'a'</span>), (<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, <span class="string">'B'</span>), (<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, <span class="string">'3'</span>), (<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, <span class="string">'2'</span>)]</span><br></pre></td></tr></table></figure>
<h1 id="2016-7-9-è¡¥å……"><a href="#2016-7-9-è¡¥å……" class="headerlink" title="2016.7.9 è¡¥å……"></a>2016.7.9 è¡¥å……</h1><p>ä»Šå¤©çœ‹äº† cookbook 5.2ï¼ŒPython 2.4 ä¹‹å‰æ˜¯ä¸æ”¯æŒ<code>key</code>çš„ï¼Œä¹¦ä¸­æä¾›äº†ä¸€ä¸ªç±»ä¼¼çš„æ€è·¯ï¼Œæ„Ÿè§‰å¯¹ç†è§£<code>key</code>çš„å®ç°å¾ˆæœ‰å¸®åŠ©ï¼Œæ‘˜å½•å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">case_insensitive_sorted</span><span class="params">(string_list)</span>:</span></span><br><span class="line">    auxiliary_list = [(x.lower(), x) <span class="keyword">for</span> x <span class="keyword">in</span> string_list] <span class="comment"># decorate</span></span><br><span class="line">    auxiliary_list.sort()                                  <span class="comment"># sort</span></span><br><span class="line">    <span class="keyword">return</span> [x[<span class="number">1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> auxiliary_list]                  <span class="comment"># undecorate</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;sortedå‡½æ•°çš„å¯ç”¨å‚æ•°å¦‚ä¸‹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;sorted(iterable[, cmp[, key[, reverse]]])&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶å®ƒå‡ ä¸ªè¿˜å¥½ç†è§£ï¼Œå°±æ˜¯&lt;code&gt;key&lt;/code&gt;çš„ç”¨æ³•ç»å¸¸ä¼šå¿˜è®°ï¼Œæ‰€ä»¥
    
    </summary>
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/categories/Python/"/>
    
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/tags/Python/"/>
    
      <category term="sorted" scheme="http://answerrrrrrrrr.io/tags/sorted/"/>
    
      <category term="key" scheme="http://answerrrrrrrrr.io/tags/key/"/>
    
  </entry>
  
  <entry>
    <title>Flask æ•°æ®åº“æ›´æ–°é—®é¢˜</title>
    <link href="http://answerrrrrrrrr.io/2016/05/16/Flask-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98/"/>
    <id>http://answerrrrrrrrr.io/2016/05/16/Flask-æ•°æ®åº“æ›´æ–°é—®é¢˜/</id>
    <published>2016-05-16T13:52:45.000Z</published>
    <updated>2016-06-26T06:37:52.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ›´æ–°åˆ—"><a href="#æ›´æ–°åˆ—" class="headerlink" title="æ›´æ–°åˆ—"></a>æ›´æ–°åˆ—</h1><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>å­¦ä¹ åˆ° 8.4.6 æµ‹è¯•ç™»å½•æ—¶</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">(venv) $ python manage<span class="selector-class">.py</span> shell </span><br><span class="line">&gt;&gt;&gt; u = User(email=<span class="string">'john@example.com'</span>, username=<span class="string">'john'</span>, password=<span class="string">'cat'</span>) </span><br><span class="line">&gt;&gt;&gt; db<span class="selector-class">.session</span><span class="selector-class">.add</span>(u) </span><br><span class="line">&gt;&gt;&gt; db<span class="selector-class">.session</span><span class="selector-class">.commit</span>()</span><br></pre></td></tr></table></figure>
<p>æŠ¥é”™è¯´è¡¨ä¸­æ—  email åˆ—</p>
<p>ç¡®è®¤ä»£ç æ— è¯¯åï¼Œåˆ¤æ–­åº”è¯¥æ˜¯æ²¡æœ‰æˆåŠŸæ›´æ–° models.py ä¸­æ–°å»ºçš„ email åˆ—ï¼Œç®€å•å°è¯•æ— æœï¼Œå†³å®šé‡æ–°çœ‹ä¸€éç›¸å…³å†…å®¹åŠ æ·±ç†è§£ï¼Œå†ç€æ‰‹è§£å†³</p>
<h2 id="ç²—æš´çš„æ›´æ–°æ–¹æ³•"><a href="#ç²—æš´çš„æ›´æ–°æ–¹æ³•" class="headerlink" title="ç²—æš´çš„æ›´æ–°æ–¹æ³•"></a>ç²—æš´çš„æ›´æ–°æ–¹æ³•</h2><p>å¦‚æœæ•°æ®åº“è¡¨å·²ç»å­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œ é‚£ä¹ˆ db.create_all() ä¸ä¼šé‡æ–°åˆ›å»ºæˆ–è€…æ›´æ–°è¿™ä¸ªè¡¨ã€‚å¦‚æœä¿®æ”¹æ¨¡å‹åè¦æŠŠæ”¹åŠ¨åº”ç”¨åˆ°ç°æœ‰çš„æ•°æ®åº“ä¸­ï¼Œè¿™ä¸€ç‰¹ æ€§ä¼šå¸¦æ¥ä¸ä¾¿ã€‚æ›´æ–°ç°æœ‰æ•°æ®åº“è¡¨çš„ç²—æš´æ–¹å¼æ˜¯å…ˆåˆ é™¤æ—§è¡¨å†é‡æ–°åˆ›å»ºï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; db.drop_all() </span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; db.create_all()</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨-Flask-Migrate-å®ç°æ•°æ®åº“è¿ç§»"><a href="#ä½¿ç”¨-Flask-Migrate-å®ç°æ•°æ®åº“è¿ç§»" class="headerlink" title="ä½¿ç”¨ Flask-Migrate å®ç°æ•°æ®åº“è¿ç§»"></a>ä½¿ç”¨ Flask-Migrate å®ç°æ•°æ®åº“è¿ç§»</h2><blockquote>
<p>æ›´æ–°è¡¨çš„æ›´å¥½æ–¹æ³•æ˜¯ä½¿ç”¨æ•°æ®åº“è¿ç§»æ¡†æ¶ã€‚æºç ç‰ˆæœ¬æ§åˆ¶å·¥å…·å¯ä»¥è·Ÿè¸ªæºç æ–‡ä»¶çš„å˜åŒ–ï¼Œ ç±»ä¼¼åœ°ï¼Œæ•°æ®åº“è¿ç§»æ¡†æ¶èƒ½è·Ÿè¸ªæ•°æ®åº“æ¨¡å¼çš„å˜åŒ–ï¼Œç„¶åå¢é‡å¼çš„æŠŠå˜åŒ–åº”ç”¨åˆ°æ•°æ®åº“ä¸­ã€‚</p>
<p>SQLAlchemy çš„ä¸»åŠ›å¼€å‘äººå‘˜ç¼–å†™äº†ä¸€ä¸ªè¿ç§»æ¡†æ¶ï¼Œç§°ä¸º Alembicï¼ˆ<a href="https://alembic.readthedocs" target="_blank" rel="external">https://alembic.readthedocs</a>. org/en/latest/index.htmlï¼‰ ã€‚ é™¤ äº† ç›´ æ¥ ä½¿ ç”¨ Alembic ä¹‹ å¤–ï¼Œ Flask ç¨‹ åº è¿˜ å¯ ä½¿ ç”¨ Flask-Migrate ï¼ˆ<a href="http://flask-migrate.readthedocs.org/en/latest/ï¼‰æ‰©å±•ã€‚è¿™ä¸ªæ‰©å±•å¯¹" target="_blank" rel="external">http://flask-migrate.readthedocs.org/en/latest/ï¼‰æ‰©å±•ã€‚è¿™ä¸ªæ‰©å±•å¯¹</a> Alembic åšäº†è½»é‡çº§åŒ…è£…ï¼Œå¹¶ é›†æˆåˆ° Flask-Script ä¸­ï¼Œæ‰€æœ‰æ“ä½œéƒ½é€šè¿‡ Flask-Script å‘½ä»¤å®Œæˆã€‚</p>
</blockquote>
<p>å®‰è£…ä¸é…ç½®ç•¥è¿‡ä¸æ<br>å‡ æ¬¡å°è¯•åï¼Œæ–¹æ‰å¯¹å‡ ä¸ªä¸»è¦å‘½ä»¤çš„å®é™…ä½œç”¨æœ‰äº†æ­£ç¡®çš„ç†è§£</p>
<h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><p>åˆ›å»ºè¿ç§»ä»“åº“å’Œè„šæœ¬ï¼Œå¹¶ä¸ä¼šç”Ÿæˆæˆ–æ›´æ–°æ•°æ®åº“æ–‡ä»¶ï¼Œ<code>migrations/versions/</code>ä¸­ä¸ºç©ºï¼Œå¦‚æœæ­¤æ—¶<code>upgrade</code>ä¼šç”Ÿæˆä¸€ä¸ªåªåŒ…å«<code>alembic_version</code>è¡¨çš„æ•°æ®åº“</p>
<figure class="highlight hsp"><table><tr><td class="code"><pre><span class="line">$ sqlite3 data-dev.sqlite</span><br><span class="line">SQLite version <span class="number">3.8</span><span class="number">.10</span><span class="number">.2</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-20</span> <span class="number">18</span>:<span class="number">17</span>:<span class="number">19</span></span><br><span class="line">Enter <span class="string">".help"</span> <span class="keyword">for</span> usage hints.</span><br><span class="line">sqlite&gt; .dump</span><br><span class="line">PRAGMA foreign_keys=OFF<span class="comment">;</span></span><br><span class="line">BEGIN TRANSACTION<span class="comment">;</span></span><br><span class="line">CREATE TABLE alembic_version (</span><br><span class="line">	version_num VARCHAR(<span class="number">32</span>) <span class="keyword">NOT</span> NULL</span><br><span class="line">)<span class="comment">;</span></span><br><span class="line">COMMIT<span class="comment">;</span></span><br><span class="line">sqlite&gt;</span><br></pre></td></tr></table></figure>
<h3 id="migrate"><a href="#migrate" class="headerlink" title="migrate"></a>migrate</h3><p>æ£€æµ‹å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œç”Ÿæˆè¿ç§»è„šæœ¬ä¿å­˜åˆ°<code>migrations/versions/</code>ä¸­ï¼Œç”¨äºæ•°æ®åº“è¿ç§»</p>
<p>ä¸è¿‡æŒ‰<a href="http://flask-migrate.readthedocs.io/en/latest/" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>æ‰€è¯´ï¼Œä¸ä¸€å®šèƒ½æ£€æµ‹åˆ°æ‰€æœ‰å¯¹æ•°æ®åº“çš„ä¿®æ”¹ï¼Œæ‰€æœ‰éœ€è¦è‡ªå·±å¯¹ç”Ÿæˆçš„è¿ç§»è„šæœ¬è¿›è¡Œæ£€æŸ¥ï¼ŒåŠ ä¸Šå¯èƒ½æœ‰é—æ¼çš„åœ°æ–¹</p>
<h3 id="upgrade"><a href="#upgrade" class="headerlink" title="upgrade"></a>upgrade</h3><p>ç”¨äºæŠŠä¸Šè¿°è¿ç§»è¿ç”¨åˆ°æ•°æ®åº“ä¸­ï¼Œå³è‡³æ­¤æ‰ä¼šçœŸæ­£å¯¹æ•°æ®åº“è¿›è¡Œæ›´æ–°</p>
<figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line">$ sqlite3 data-dev.sqlite</span><br><span class="line">SQLite version <span class="number">3.8</span><span class="number">.10</span><span class="number">.2</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-20</span> <span class="number">18</span>:<span class="number">17</span>:<span class="number">19</span></span><br><span class="line">Enter <span class="string">".help"</span> <span class="keyword">for</span> usage hints.</span><br><span class="line">sqlite&gt; .dump</span><br><span class="line">PRAGMA foreign_keys=OFF;</span><br><span class="line">BEGIN TRANSACTION;</span><br><span class="line"><span class="keyword">CREATE</span> TABLE alembic_version (</span><br><span class="line">	version_num VARCHAR(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="built_in">NULL</span></span><br><span class="line">);</span><br><span class="line">INSERT INTO <span class="string">"alembic_version"</span> VALUES('bb488872a057');</span><br><span class="line"><span class="keyword">CREATE</span> TABLE roles (</span><br><span class="line">	id INTEGER <span class="keyword">NOT</span> <span class="built_in">NULL</span>,</span><br><span class="line">	name VARCHAR(<span class="number">64</span>),</span><br><span class="line">	PRIMARY <span class="built_in">KEY</span> (id),</span><br><span class="line">	<span class="built_in">UNIQUE</span> (name)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> TABLE users (</span><br><span class="line">	id INTEGER <span class="keyword">NOT</span> <span class="built_in">NULL</span>,</span><br><span class="line">	email VARCHAR(<span class="number">64</span>),</span><br><span class="line">	username VARCHAR(<span class="number">64</span>),</span><br><span class="line">	role_id INTEGER,</span><br><span class="line">	password_hash VARCHAR(<span class="number">128</span>),</span><br><span class="line">	PRIMARY <span class="built_in">KEY</span> (id),</span><br><span class="line">	FOREIGN <span class="built_in">KEY</span>(role_id) REFERENCES roles (id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="built_in">UNIQUE</span> INDEX ix_users_email ON users (email);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="built_in">UNIQUE</span> INDEX ix_users_username ON users (username);</span><br><span class="line">COMMIT;</span><br><span class="line">sqlite&gt;</span><br></pre></td></tr></table></figure>
<h1 id="ç®¡ç†å‘˜è§’è‰²"><a href="#ç®¡ç†å‘˜è§’è‰²" class="headerlink" title="ç®¡ç†å‘˜è§’è‰²"></a>ç®¡ç†å‘˜è§’è‰²</h1><h2 id="é‡åˆ°çš„é—®é¢˜-1"><a href="#é‡åˆ°çš„é—®é¢˜-1" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>å­¦ä¹ åˆ° 10.3.2åï¼Œå‘ç°ä»¥ç®¡ç†å‘˜é‚®ç®±æ³¨å†Œçš„å¸å·å¹¶ä¸èƒ½æ‰“å¼€<code>ç®¡ç†å‘˜çº§åˆ«çš„èµ„æ–™ç¼–è¾‘å™¨</code><br>æ‰‹åŠ¨æŸ¥çœ‹æ•°æ®åº“ï¼š<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">"users"</span> <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">'huamingrui@163.com'</span>,<span class="string">'huamingrui'</span>,<span class="literal">NULL</span>,<span class="string">'pbkdf2:sha1:1000$wpqGMEz8$a3bf86fcb0be120a7510a8f702077eb2fdfa1980'</span>,<span class="number">1</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>,<span class="string">'2016-05-17 14:17:48.930851'</span>,<span class="string">'2016-05-17 14:19:00.735339'</span>);</span><br></pre></td></tr></table></figure></p>
<p>å‘ç°<code>role_id</code>é¡¹ä¸ºç©ºï¼Œå³è§’è‰²æ²¡æœ‰è¢«æˆåŠŸèµ‹äºˆ</p>
<h2 id="Role-insert-roles"><a href="#Role-insert-roles" class="headerlink" title="Role.insert_roles()"></a>Role.insert_roles()</h2><p>å›å»ç¿»ä¹¦ï¼Œæ‰¾åˆ° 9.3 æœ€åçš„éƒ¨åˆ†è¯´åˆ°</p>
<blockquote>
<p>åœ¨ä½ é˜…è¯»ä¸‹ä¸€ç« ä¹‹å‰ï¼Œæœ€å¥½é‡æ–°åˆ›å»ºæˆ–è€…æ›´æ–°å¼€å‘æ•°æ®åº“ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œé‚£äº›åœ¨å®ç°è§’è‰²å’Œ æƒé™ä¹‹å‰åˆ›å»ºçš„ç”¨æˆ·è´¦æˆ·å°±è¢«èµ‹äºˆäº†è§’è‰²ã€‚</p>
</blockquote>
<p>ç„¶è€Œå®æµ‹å‘ç°ï¼Œå¯¹äºç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¿…é¡»åœ¨æ³¨å†Œä¹‹å‰å°±å®Œæˆ 9.1 æœ€åçš„<code>Role.insert_roles()</code>æ­¥éª¤ï¼Œæ‰èƒ½æˆåŠŸä¸ºç®¡ç†å‘˜é‚®ç®±ç”¨æˆ·èµ‹äºˆ<code>ç®¡ç†å‘˜è§’è‰²</code></p>
<figure class="highlight vbnet"><table><tr><td class="code"><pre><span class="line">$ rm data-dev.sqlite</span><br><span class="line">$ python manage.py db upgrade</span><br><span class="line">INFO  [alembic.runtime.migration] Context impl SQLiteImpl.</span><br><span class="line">INFO  [alembic.runtime.migration] Will assume non-transactional DDL.</span><br><span class="line">INFO  [alembic.runtime.migration] Running upgrade  -&gt; <span class="number">02</span>ccb3e6a553, empty message</span><br><span class="line">$ sqlite3 data-dev.sqlite</span><br><span class="line">SQLite version <span class="number">3.8</span><span class="number">.10</span><span class="number">.2</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-20</span> <span class="number">18</span>:<span class="number">17</span>:<span class="number">19</span></span><br><span class="line">Enter <span class="string">".help"</span> <span class="keyword">for</span> usage hints.</span><br><span class="line">sqlite&gt; .dump</span><br><span class="line">PRAGMA foreign_keys=<span class="keyword">OFF</span>;</span><br><span class="line">BEGIN TRANSACTION;</span><br><span class="line">CREATE TABLE alembic_version (</span><br><span class="line">	version_num VARCHAR(<span class="number">32</span>) <span class="keyword">NOT</span> NULL</span><br><span class="line">);</span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"alembic_version"</span> VALUES(<span class="comment">'02ccb3e6a553');</span></span><br><span class="line">CREATE TABLE roles (</span><br><span class="line">	id <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> NULL,</span><br><span class="line">	name VARCHAR(<span class="number">64</span>),</span><br><span class="line">	<span class="string">"default"</span> <span class="built_in">BOOLEAN</span>,</span><br><span class="line">	permissions <span class="built_in">INTEGER</span>,</span><br><span class="line">	PRIMARY <span class="keyword">KEY</span> (id),</span><br><span class="line">	UNIQUE (name),</span><br><span class="line">	CHECK (<span class="string">"default"</span> <span class="keyword">IN</span> (<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">);</span><br><span class="line">CREATE TABLE users (</span><br><span class="line">	id <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> NULL,</span><br><span class="line">	email VARCHAR(<span class="number">64</span>),</span><br><span class="line">	username VARCHAR(<span class="number">64</span>),</span><br><span class="line">	role_id <span class="built_in">INTEGER</span>,</span><br><span class="line">	password_hash VARCHAR(<span class="number">128</span>),</span><br><span class="line">	confirmed <span class="built_in">BOOLEAN</span>,</span><br><span class="line">	name VARCHAR(<span class="number">64</span>),</span><br><span class="line">	location VARCHAR(<span class="number">64</span>),</span><br><span class="line">	about_me <span class="keyword">TEXT</span>,</span><br><span class="line">	member_since DATETIME,</span><br><span class="line">	last_seen DATETIME,</span><br><span class="line">	PRIMARY <span class="keyword">KEY</span> (id),</span><br><span class="line">	FOREIGN <span class="keyword">KEY</span>(role_id) REFERENCES roles (id),</span><br><span class="line">	CHECK (confirmed <span class="keyword">IN</span> (<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">);</span><br><span class="line">CREATE INDEX ix_roles_default <span class="keyword">ON</span> roles (<span class="string">"default"</span>);</span><br><span class="line">CREATE UNIQUE INDEX ix_users_email <span class="keyword">ON</span> users (email);</span><br><span class="line">CREATE UNIQUE INDEX ix_users_username <span class="keyword">ON</span> users (username);</span><br><span class="line">COMMIT;</span><br><span class="line">sqlite&gt; ^D</span><br><span class="line">$ python manage.py shell</span><br><span class="line">&gt;&gt;&gt; Role.insert_roles()</span><br><span class="line">&gt;&gt;&gt; Role.query.all()</span><br><span class="line">[&lt;Role u<span class="comment">'Moderator'&gt;, <span class="doctag">&lt;Role u'Administrator'&gt;</span>, <span class="doctag">&lt;Role u'User'&gt;</span>]</span></span><br><span class="line">&gt;&gt;&gt; ^D</span><br><span class="line">$ sqlite3 data-dev.sqlite</span><br><span class="line">SQLite version <span class="number">3.8</span><span class="number">.10</span><span class="number">.2</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-20</span> <span class="number">18</span>:<span class="number">17</span>:<span class="number">19</span></span><br><span class="line">Enter <span class="string">".help"</span> <span class="keyword">for</span> usage hints.</span><br><span class="line">sqlite&gt; .dump</span><br><span class="line">PRAGMA foreign_keys=<span class="keyword">OFF</span>;</span><br><span class="line">BEGIN TRANSACTION;</span><br><span class="line">CREATE TABLE alembic_version (</span><br><span class="line">	version_num VARCHAR(<span class="number">32</span>) <span class="keyword">NOT</span> NULL</span><br><span class="line">);</span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"alembic_version"</span> VALUES(<span class="comment">'02ccb3e6a553');</span></span><br><span class="line">CREATE TABLE roles (</span><br><span class="line">	id <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> NULL,</span><br><span class="line">	name VARCHAR(<span class="number">64</span>),</span><br><span class="line">	<span class="string">"default"</span> <span class="built_in">BOOLEAN</span>,</span><br><span class="line">	permissions <span class="built_in">INTEGER</span>,</span><br><span class="line">	PRIMARY <span class="keyword">KEY</span> (id),</span><br><span class="line">	UNIQUE (name),</span><br><span class="line">	CHECK (<span class="string">"default"</span> <span class="keyword">IN</span> (<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">);</span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"roles"</span> VALUES(<span class="number">1</span>,<span class="comment">'Moderator',0,15);</span></span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"roles"</span> VALUES(<span class="number">2</span>,<span class="comment">'Administrator',0,255);</span></span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"roles"</span> VALUES(<span class="number">3</span>,<span class="comment">'User',1,7);</span></span><br><span class="line">CREATE TABLE users (</span><br><span class="line">	id <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> NULL,</span><br><span class="line">	email VARCHAR(<span class="number">64</span>),</span><br><span class="line">	username VARCHAR(<span class="number">64</span>),</span><br><span class="line">	role_id <span class="built_in">INTEGER</span>,</span><br><span class="line">	password_hash VARCHAR(<span class="number">128</span>),</span><br><span class="line">	confirmed <span class="built_in">BOOLEAN</span>,</span><br><span class="line">	name VARCHAR(<span class="number">64</span>),</span><br><span class="line">	location VARCHAR(<span class="number">64</span>),</span><br><span class="line">	about_me <span class="keyword">TEXT</span>,</span><br><span class="line">	member_since DATETIME,</span><br><span class="line">	last_seen DATETIME,</span><br><span class="line">	PRIMARY <span class="keyword">KEY</span> (id),</span><br><span class="line">	FOREIGN <span class="keyword">KEY</span>(role_id) REFERENCES roles (id),</span><br><span class="line">	CHECK (confirmed <span class="keyword">IN</span> (<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">);</span><br><span class="line">CREATE INDEX ix_roles_default <span class="keyword">ON</span> roles (<span class="string">"default"</span>);</span><br><span class="line">CREATE UNIQUE INDEX ix_users_email <span class="keyword">ON</span> users (email);</span><br><span class="line">CREATE UNIQUE INDEX ix_users_username <span class="keyword">ON</span> users (username);</span><br><span class="line">COMMIT;</span><br><span class="line">sqlite&gt; ^D</span><br><span class="line">$ python manage.py runserver</span><br></pre></td></tr></table></figure>
<p>æ³¨å†Œç®¡ç†å‘˜é‚®ç®±<br><figure class="highlight lasso"><table><tr><td class="code"><pre><span class="line">$ sqlite3 <span class="built_in">data</span><span class="attr">-dev</span>.sqlite</span><br><span class="line">SQLite version <span class="number">3.8</span><span class="number">.10</span><span class="number">.2</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-20</span> <span class="number">18</span>:<span class="number">17</span>:<span class="number">19</span></span><br><span class="line">Enter <span class="string">".help"</span> for usage hints.</span><br><span class="line">sqlite&gt; .dump</span><br><span class="line">PRAGMA foreign_keys=OFF;</span><br><span class="line">BEGIN TRANSACTION;</span><br><span class="line">CREATE TABLE alembic_version (</span><br><span class="line">	version_num VARCHAR(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="built_in">NULL</span></span><br><span class="line">);</span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"alembic_version"</span> VALUES(<span class="string">'02ccb3e6a553'</span>);</span><br><span class="line">CREATE TABLE roles (</span><br><span class="line">	id <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> <span class="built_in">NULL</span>,</span><br><span class="line">	name VARCHAR(<span class="number">64</span>),</span><br><span class="line">	<span class="string">"default"</span> <span class="built_in">BOOLEAN</span>,</span><br><span class="line">	permissions <span class="built_in">INTEGER</span>,</span><br><span class="line">	PRIMARY KEY (id),</span><br><span class="line">	UNIQUE (name),</span><br><span class="line">	CHECK (<span class="string">"default"</span> <span class="keyword">IN</span> (<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">);</span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"roles"</span> VALUES(<span class="number">1</span>,<span class="string">'Moderator'</span>,<span class="number">0</span>,<span class="number">15</span>);</span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"roles"</span> VALUES(<span class="number">2</span>,<span class="string">'Administrator'</span>,<span class="number">0</span>,<span class="number">255</span>);</span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"roles"</span> VALUES(<span class="number">3</span>,<span class="string">'User'</span>,<span class="number">1</span>,<span class="number">7</span>);</span><br><span class="line">CREATE TABLE users (</span><br><span class="line">	id <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> <span class="built_in">NULL</span>,</span><br><span class="line">	email VARCHAR(<span class="number">64</span>),</span><br><span class="line">	username VARCHAR(<span class="number">64</span>),</span><br><span class="line">	role_id <span class="built_in">INTEGER</span>,</span><br><span class="line">	password_hash VARCHAR(<span class="number">128</span>),</span><br><span class="line">	confirmed <span class="built_in">BOOLEAN</span>,</span><br><span class="line">	name VARCHAR(<span class="number">64</span>),</span><br><span class="line">	location VARCHAR(<span class="number">64</span>),</span><br><span class="line">	about_me TEXT,</span><br><span class="line">	member_since DATETIME,</span><br><span class="line">	last_seen DATETIME,</span><br><span class="line">	PRIMARY KEY (id),</span><br><span class="line">	FOREIGN KEY(role_id) REFERENCES roles (id),</span><br><span class="line">	CHECK (confirmed <span class="keyword">IN</span> (<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">);</span><br><span class="line">INSERT <span class="keyword">INTO</span> <span class="string">"users"</span> VALUES(<span class="number">1</span>,<span class="string">'huamingrui@163.com'</span>,<span class="string">'MrHua'</span>,<span class="number">2</span>,<span class="string">'pbkdf2:sha1:1000$tSmBVC7j$6f3d994eb5b6b455347b56d3112a4cac26fc97e1'</span>,<span class="number">1</span>,<span class="built_in">NULL</span>,<span class="built_in">NULL</span>,<span class="built_in">NULL</span>,<span class="string">'2016-05-17 14:34:36.781740'</span>,<span class="string">'2016-05-17 14:52:08.764862'</span>);</span><br><span class="line">CREATE INDEX ix_roles_default <span class="keyword">ON</span> roles (<span class="string">"default"</span>);</span><br><span class="line">CREATE UNIQUE INDEX ix_users_email <span class="keyword">ON</span> users (email);</span><br><span class="line">CREATE UNIQUE INDEX ix_users_username <span class="keyword">ON</span> users (username);</span><br><span class="line">COMMIT;</span><br><span class="line">sqlite&gt;</span><br></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ›´æ–°åˆ—&quot;&gt;&lt;a href=&quot;#æ›´æ–°åˆ—&quot; class=&quot;headerlink&quot; title=&quot;æ›´æ–°åˆ—&quot;&gt;&lt;/a&gt;æ›´æ–°åˆ—&lt;/h1&gt;&lt;h2 id=&quot;é‡åˆ°çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#é‡åˆ°çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é‡åˆ°çš„é—®é¢˜&quot;&gt;&lt;/a&gt;
    
    </summary>
    
      <category term="Flask" scheme="http://answerrrrrrrrr.io/categories/Flask/"/>
    
    
      <category term="Flask-SQLAlchemy" scheme="http://answerrrrrrrrr.io/tags/Flask-SQLAlchemy/"/>
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/tags/Python/"/>
    
      <category term="Alembic" scheme="http://answerrrrrrrrr.io/tags/Alembic/"/>
    
      <category term="Flask-Migrate" scheme="http://answerrrrrrrrr.io/tags/Flask-Migrate/"/>
    
  </entry>
  
  <entry>
    <title>SohuSpider</title>
    <link href="http://answerrrrrrrrr.io/2016/04/13/SohuSpider/"/>
    <id>http://answerrrrrrrrr.io/2016/04/13/SohuSpider/</id>
    <published>2016-04-13T07:55:31.000Z</published>
    <updated>2016-07-06T14:06:33.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><blockquote>
<p>è¯·è®¾è®¡ä¸€ä¸ªç³»ç»Ÿï¼Œè‡ªåŠ¨å®Œæˆå¯¹äºæ‰‹æœºæœç‹(<a href="http://m.sohu.com/" target="_blank" rel="external">http://m.sohu.com/</a> )ç³»ç»Ÿå¯é æ€§çš„æ£€æµ‹ã€‚å…·ä½“è¦æ±‚ï¼š  </p>
<ol>
<li>å®šæ—¶é€’å½’æ£€æµ‹æ‰€æœ‰m.sohu.comåŸŸåçš„é¡µé¢ä»¥åŠè¿™äº›é¡µé¢ä¸Šçš„é“¾æ¥çš„å¯è¾¾æ€§ï¼Œå³æœ‰æ²¡æœ‰å‡ºç°ä¸å¯è®¿é—®æƒ…å†µã€‚  </li>
<li>m.sohu.comåŸŸåé¡µé¢å¾ˆå¤šï¼Œä»å„ä¸ªæ–¹é¢è€ƒè™‘æ€§èƒ½ä¼˜åŒ–ã€‚  </li>
<li>å¯¹äºé”™è¯¯çš„é“¾æ¥è®°å½•åˆ°æ—¥å¿—ä¸­ï¼Œæ—¥å¿—åŒ…æ‹¬ï¼šè¿æ¥ï¼Œæ—¶é—´ï¼Œé”™è¯¯çŠ¶æ€ç­‰ã€‚  </li>
<li>è€ƒè™‘å¤šçº¿ç¨‹çš„æ–¹å¼å®ç°  </li>
</ol>
<p>è¦æ±‚ï¼šç”¨Pythonå®ç°ï¼Œä¸ä½¿ç”¨çˆ¬å–æ¡†æ¶ï¼Œä¸€å‘¨å†…å›å¤ã€‚</p>
</blockquote>
<h1 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h1><p>å› ä¸ºä¹‹å‰æ‰åˆšåˆšå†™äº†ä¸€ä¸ªçˆ¬è™«ï¼Œæœ¬ä»¥ä¸ºé‡Œé¢çš„çº¿ç¨‹æ± æ‹¿æ¥å°±èƒ½ç”¨<br>ç»“æœæ˜¨å¤©æ™šä¸Šå¤§è‡´æ”¹äº†ä¸ªé›å½¢å‡ºæ¥ï¼Œå‘è§‰çˆ¬åˆ°5åˆ†é’Ÿå¿…å®šå¡æ­»ï¼Œæ”¹äº†ä¸€æ™šä¸Šéƒ½æ²¡æœ‰è§£å†³<br>ä¸€æ€’ä¹‹ä¸‹ Google äº†ä¸€è®°ã€‚ã€‚ã€‚<br>æœå‡ºæ¥ä¸¤ä½å¯èƒ½æ˜¯å»å¹´å®ä¹ çš„ä»å…„çš„ç­”æ¡ˆï¼Œå…¶ä¸­ä¸€ä½ä¹Ÿæ˜¯ç”¨çš„çº¿ç¨‹æ± ï¼Œæ‰æ„è¯†åˆ°é—®é¢˜åº”è¯¥ä¸åœ¨è¿™é‡Œ<br>æŠ¬å¤´ä¸€çœ‹12ç‚¹äº†ï¼Œè¿˜çªç„¶åœæ°´ä¸èƒ½æ´—è„šã€‚ã€‚ã€‚è‰è‰åˆ·ä¸ªç‰™éƒé—·åœ°æ»šå»ç¡äº†</p>
<p>ä»Šå¤©å­¦ä¹ äº†ä¸€ä¸‹äºŒä½å‰è¾ˆçš„ä»£ç ï¼Œå½»åº•é‡å†™äº†ä¸€ä¸ªï¼Œè¿˜æ˜¯å¡åœ¨5åˆ†é’Ÿï¼Œå®åœ¨è«åå…¶å¦™<br>Google ç™¾åº¦ å„ç§æ”¹æ¥æ”¹å»æ— æœï¼Œå·®ç‚¹ç»æœ›äº†   </p>
<p>åæ¥æƒ³åˆ°ï¼Œæ²¡å¤´ç»ªçš„ç¼˜ç”±è¿˜æ˜¯å› ä¸ºå¡ä½çš„æ—¶å€™è¿ä¸ªæŠ¥é”™éƒ½æ²¡æœ‰ï¼Œæ²¡æœ‰å¥½çš„åˆ‡å…¥ç‚¹<br>é‚£æˆ‘å°±å¤šåŠ ç‚¹ logger å¥½äº†</p>
<p>è¿™æ‰å‘ç°ï¼Œ5åˆ†é’Ÿçš„æ—¶å€™æå– URL ä¼šå‡ºç°å¤§ç‰‡çš„<code>None</code>ï¼Œåœ¨è¿™ä¹‹å‰æœ‰ä¸ªé“¾æ¥æ˜¯ <a href="http://m.sohu.com/f/521204/?_once_=000067_ayy" target="_blank" rel="external">http://m.sohu.com/f/521204/?_once_=000067_ayy</a><br>æ‰‹åŠ¨æ‰“å¼€çš„è¯ä¼šå¼¹çª—ä¸‹è½½ æœç‹æ–°é—» apk<br>éš¾é“æ˜¯å› ä¸ºè¿™ä¸ªåŸå› å¯¼è‡´ BeautifulSoup æå–ä¸å‡ºæ¥ href äº†ï¼Ÿ</p>
<p>å¦å¤–æœ‰ä¸ªæ„å¤–å‘ç°ã€‚ã€‚ã€‚<br>è¿™å›çœ‹è§å¡ä½äº†ä¹‹åæ²¡æœ‰æ€¥ç€é¡ºæ‰‹ kill æ‰<br>ç»“æœå±…ç„¶ç­‰äº†å‡ åˆ†é’Ÿå°±å¥½äº†ã€‚ã€‚ã€‚è·‘å¾—é‚£å«ä¸€ä¸ªé¡ºç•…ã€‚ã€‚ã€‚<br>æˆ‘ä¹Ÿä¸çŸ¥é“è¿™ç®—ä»€ä¹ˆæƒ…å†µäº†ã€‚ã€‚ã€‚   </p>
<p>æŠŠ crontab çš„è‡ªåŠ¨å®šæ—¶åŠ ä¸Šï¼Œè¿™æ ·å¤§è‡´ç®—æ˜¯å®Œæˆäº†å§<br>æ˜å¤©å†çœ‹çœ‹èƒ½åšä»€ä¹ˆè°ƒæ•´</p>
<p>è¿˜æœ‰è®ºæ–‡æ²¡çœ‹å‘¢ã€‚ã€‚ã€‚</p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><p><a href="https://github.com/answerrrrrrrrr/SohuSpider/blob/master/SohuSpider.py" target="_blank" rel="external">https://github.com/answerrrrrrrrr/SohuSpider/blob/master/SohuSpider.py</a></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="https://github.com/zhangity/sohu_crawled/blob/master/sohu1-5.py" target="_blank" rel="external">https://github.com/zhangity/sohu_crawled/blob/master/sohu1-5.py</a></li>
<li><a href="https://github.com/lan2720/deadurl_detector/blob/master/crawl.py#L2" target="_blank" rel="external">https://github.com/lan2720/deadurl_detector/blob/master/crawl.py#L2</a></li>
<li><a href="http://honglu.me/2014/09/20/OSX%E7%B3%BB%E7%BB%9F%E6%B7%BB%E5%8A%A0%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" target="_blank" rel="external">http://honglu.me/2014/09/20/OSX%E7%B3%BB%E7%BB%9F%E6%B7%BB%E5%8A%A0%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;é¢˜ç›®&quot;&gt;&lt;a href=&quot;#é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®&quot;&gt;&lt;/a&gt;é¢˜ç›®&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;è¯·è®¾è®¡ä¸€ä¸ªç³»ç»Ÿï¼Œè‡ªåŠ¨å®Œæˆå¯¹äºæ‰‹æœºæœç‹(&lt;a href=&quot;http://m.sohu.com/&quot; target=&quot;_
    
    </summary>
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/categories/Python/"/>
    
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/tags/Python/"/>
    
      <category term="sohu" scheme="http://answerrrrrrrrr.io/tags/sohu/"/>
    
      <category term="Spider" scheme="http://answerrrrrrrrr.io/tags/Spider/"/>
    
  </entry>
  
  <entry>
    <title>Spider-07-doctest</title>
    <link href="http://answerrrrrrrrr.io/2016/04/08/Spider-07-doctest/"/>
    <id>http://answerrrrrrrrr.io/2016/04/08/Spider-07-doctest/</id>
    <published>2016-04-08T03:43:23.000Z</published>
    <updated>2016-07-06T14:08:22.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="çŸ¥é“åˆ›å®‡çˆ¬è™«è®¾è®¡ç¬¬ä¸ƒå¤©-doctest"><a href="#çŸ¥é“åˆ›å®‡çˆ¬è™«è®¾è®¡ç¬¬ä¸ƒå¤©-doctest" class="headerlink" title="çŸ¥é“åˆ›å®‡çˆ¬è™«è®¾è®¡ç¬¬ä¸ƒå¤©: doctest"></a>çŸ¥é“åˆ›å®‡çˆ¬è™«è®¾è®¡ç¬¬ä¸ƒå¤©: doctest</h1><p><code>doctest</code>æ˜¯ Python å†…å»ºçš„æ¨¡å—ï¼Œç”¨äºæ–‡æ¡£æµ‹è¯•ï¼Œæ­£å¥½å¯ä»¥æ‹¿æ¥ç”¨äºçˆ¬è™«çš„è‡ªæµ‹åŠŸèƒ½</p>
<p>è¿™ä¸ªæ¨¡å—ç›¸å¯¹ç®€å•ï¼Œç›´æ¥è´´ä»£ç </p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">''' Prepare and run the spider</span><br><span class="line">    Self-test:</span><br><span class="line">    &gt;&gt;&gt; class Args(object):</span><br><span class="line">    ...     pass</span><br><span class="line">    ...</span><br><span class="line">    &gt;&gt;&gt; args = Args()</span><br><span class="line">    &gt;&gt;&gt; args.url = 'www.baidu.com'</span><br><span class="line">    &gt;&gt;&gt; args.depth = 1</span><br><span class="line">    &gt;&gt;&gt; args.logfile = 'testself.log'</span><br><span class="line">    &gt;&gt;&gt; args.loglevel = 4</span><br><span class="line">    &gt;&gt;&gt; args.dbfile = 'testself.db'</span><br><span class="line">    &gt;&gt;&gt; args.num_threads = 1</span><br><span class="line">    &gt;&gt;&gt; args.key = ''</span><br><span class="line">    &gt;&gt;&gt; set_logger(args.loglevel, args.logfile)</span><br><span class="line">    &gt;&gt;&gt; logger.info(vars(args))</span><br><span class="line">    &gt;&gt;&gt; spider = MySpider(args)</span><br><span class="line">    &gt;&gt;&gt; spider.run()</span><br><span class="line">    '''</span></span><br><span class="line">...</span><br><span class="line">    <span class="comment"># Self test</span></span><br><span class="line">    <span class="keyword">if</span> args.testself:</span><br><span class="line">        <span class="keyword">import</span> doctest</span><br><span class="line">        <span class="keyword">print</span> doctest.testmod()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>å¦å¤–å…¶å®ƒéƒ¨åˆ†ä¹Ÿæœ‰å°‘é‡ä¿®æ”¹ï¼Œæ”¾åœ¨ <a href="https://github.com/answerrrrrrrrr/KnownsecSpider" target="_blank" rel="external">https://github.com/answerrrrrrrrr/KnownsecSpider</a></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014319170285543a4d04751f8846908770660de849f285000" target="_blank" rel="external">http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014319170285543a4d04751f8846908770660de849f285000</a></li>
<li><a href="http://devdocs.io/python~2.7/library/doctest#doctest.DocTest" target="_blank" rel="external">http://devdocs.io/python~2.7/library/doctest#doctest.DocTest</a></li>
<li><a href="http://devdocs.io/python~2.7/library/argparse#argparse.Namespace" target="_blank" rel="external">http://devdocs.io/python~2.7/library/argparse#argparse.Namespace</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;çŸ¥é“åˆ›å®‡çˆ¬è™«è®¾è®¡ç¬¬ä¸ƒå¤©-doctest&quot;&gt;&lt;a href=&quot;#çŸ¥é“åˆ›å®‡çˆ¬è™«è®¾è®¡ç¬¬ä¸ƒå¤©-doctest&quot; class=&quot;headerlink&quot; title=&quot;çŸ¥é“åˆ›å®‡çˆ¬è™«è®¾è®¡ç¬¬ä¸ƒå¤©: doctest&quot;&gt;&lt;/a&gt;çŸ¥é“åˆ›å®‡çˆ¬è™«è®¾è®¡ç¬¬ä¸ƒå¤©: doctest&lt;/h1&gt;&lt;p&gt;
    
    </summary>
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/categories/Python/"/>
    
    
      <category term="Python" scheme="http://answerrrrrrrrr.io/tags/Python/"/>
    
      <category term="Spider" scheme="http://answerrrrrrrrr.io/tags/Spider/"/>
    
      <category term="doctest" scheme="http://answerrrrrrrrr.io/tags/doctest/"/>
    
  </entry>
  
</feed>
